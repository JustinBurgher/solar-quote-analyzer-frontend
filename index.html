// Inputs: recommendedSystemSize from earlier consultation steps
let recommendedSystemSizeKW = 5.0;

// 1) Gather usable roof size from customer
let roofLengthM = parseFloat(prompt("Enter usable roof length in meters:"));
let roofWidthM = parseFloat(prompt("Enter usable roof width in meters:"));

// 2) Usable area calculation with 20% deduction for obstacles/shading
let usableRoofAreaM2 = roofLengthM * roofWidthM * 0.8;

// 3) Panel sizes (m¬≤ per panel)
const standardPanelAreaM2 = 1.75 * 1.13; // 1.98m¬≤
const largePanelAreaM2 = 1.96 * 1.13;   // 2.21m¬≤

// 4) Panel wattages (customizable, average market value)
const standardPanelWattage = 400; // W
const largePanelWattage = 450;    // W

// 5) Max panels & system sizes calculation
let maxStandardPanels = Math.floor(usableRoofAreaM2 / standardPanelAreaM2);
let maxLargePanels = Math.floor(usableRoofAreaM2 / largePanelAreaM2);

let maxStandardSystemKW = (maxStandardPanels * standardPanelWattage) / 1000;
let maxLargeSystemKW = (maxLargePanels * largePanelWattage) / 1000;

// 6) Determine if recommended size fits either option
console.log(`üè† Usable Roof Area: ${usableRoofAreaM2.toFixed(1)}m¬≤`);
console.log(`‚úÖ Max with Standard Panels: ${maxStandardPanels} panels ‚Üí ${maxStandardSystemKW.toFixed(1)}kW`);
console.log(`‚úÖ Max with Large Panels: ${maxLargePanels} panels ‚Üí ${maxLargeSystemKW.toFixed(1)}kW`);

if (recommendedSystemSizeKW <= maxStandardSystemKW) {
    console.log(`üëç Your roof can fit the recommended ${recommendedSystemSizeKW.toFixed(1)}kW system with standard panels.`);
} else if (recommendedSystemSizeKW <= maxLargeSystemKW) {
    console.log(`üëç Your roof can fit the recommended ${recommendedSystemSizeKW.toFixed(1)}kW system using larger panels.`);
} else {
    console.log(`‚ö†Ô∏è Your roof can only support up to ${Math.max(maxStandardSystemKW, maxLargeSystemKW).toFixed(1)}kW.`);
    recommendedSystemSizeKW = Math.max(maxStandardSystemKW, maxLargeSystemKW);
    console.log(`üîÑ Adjusted recommended system size: ${recommendedSystemSizeKW.toFixed(1)}kW`);
}

// 7) Offer 3D analysis (with quality check placeholder)
let satelliteImageryAvailable = confirm("We‚Äôll check your address: do you want to proceed with a professional 3D Roof Scan for ¬£29?");

if (satelliteImageryAvailable) {
    console.log(`
üìê Great choice! We‚Äôll perform a 3D Roof Analysis & Solar Report for ¬£29.
Includes precise panel layout, shading study & a detailed plan you can use with any installer.
`);
} else {
    console.log(`
‚ö†Ô∏è Sorry, satellite imagery may not support a 3D analysis for your location.
Please consider a manual measurement or professional site survey.
`);
}
