<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Truth AI - Don't Get Ripped Off on Solar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hero-gradient {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #60a5fa 100%);
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tab-button.active { background-color: #3b82f6; color: white; }
        .tab-button { background-color: #f8fafc; color: #475569; }
        .size-button { 
            transition: all 0.2s; 
            border: 2px solid #e2e8f0;
            background-color: #ffffff;
        }
        .size-button:hover { 
            border-color: #3b82f6; 
            background-color: #eff6ff;
        }
        .size-button.selected { 
            background-color: #3b82f6; 
            color: white; 
            border-color: #3b82f6;
        }
        .custom-input { display: none; }
        .custom-input.active { display: block; }
        .battery-models { display: none; }
        .battery-models.active { display: block; }
        .consultation-step { display: none; }
        .consultation-step.active { display: block; }
        .progress-bar {
            transition: width 0.3s ease;
        }
        .consultation-option {
            transition: all 0.2s;
            cursor: pointer;
        }
        .consultation-option:hover {
            border-color: #3b82f6 !important;
            background-color: #eff6ff !important;
        }
        .consultation-option.selected {
            border-color: #3b82f6 !important;
            background-color: #eff6ff !important;
        }
        .recommendation-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            transition: all 0.2s;
        }
        .recommendation-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .confidence-badge {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            display: inline-block;
        }
        .insight-card {
            border-left: 4px solid #f59e0b;
            background: #fffbeb;
        }
        .tips-card {
            border-left: 4px solid #8b5cf6;
            background: #f5f3ff;
        }
        .steps-card {
            border-left: 4px solid #3b82f6;
            background: #eff6ff;
        }
        .system-icon {
            width: 48px;
            height: 48px;
            background: #3b82f6;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }
        .hidden { display: none !important; }
        .inflation-toggle {
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 12px;
            margin-top: 8px;
        }
        .toggle-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s;
        }
        .toggle-button:hover {
            background: #2563eb;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <div class="text-2xl">‚òÄÔ∏è</div>
                    <h1 class="ml-2 text-xl font-bold text-gray-900">Solar Truth AI</h1>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="#problem" class="text-gray-600 hover:text-gray-900">The Problem</a>
                    <a href="#solution" class="text-gray-600 hover:text-gray-900">Our Solution</a>
                    <a href="#consultation" class="text-gray-600 hover:text-gray-900">Free Analysis</a>
                    <a href="#contact" class="text-gray-600 hover:text-gray-900">Contact</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-gradient text-white py-20">
        <div class="max-w-4xl mx-auto text-center px-4">
            <h1 class="text-4xl md:text-6xl font-bold mb-6">
                Don't Get Ripped Off on Solar
            </h1>
            <p class="text-xl md:text-2xl mb-8 opacity-90">
                Most UK homeowners overpay by ¬£1,000s because they don't know what system they actually need. Get independent, unbiased analysis.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button onclick="scrollToConsultation()" class="bg-white text-blue-600 px-8 py-4 rounded-lg font-semibold text-lg hover:bg-gray-100 transition">
                    Find Out What You Need FREE
                </button>
                <button onclick="scrollToAnalyzer()" class="border-2 border-white text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-white hover:text-blue-600 transition">
                    Analyze My Quote FREE
                </button>
            </div>
        </div>
    </section>

    <!-- Problem Section -->
    <section id="problem" class="py-16 bg-white">
        <div class="max-w-6xl mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12">The Solar Industry Has a Problem</h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div class="text-4xl mb-4">üí∏</div>
                    <h3 class="text-xl font-semibold mb-2">Overpriced Systems</h3>
                    <p class="text-gray-600">Installers recommend oversized systems to maximize their profit, not your savings.</p>
                </div>
                <div class="text-center">
                    <div class="text-4xl mb-4">üìâ</div>
                    <h3 class="text-xl font-semibold mb-2">Poor ROI</h3>
                    <p class="text-gray-600">Generic calculators ignore your actual energy usage patterns and work schedule.</p>
                </div>
                <div class="text-center">
                    <div class="text-4xl mb-4">ü§∑</div>
                    <h3 class="text-xl font-semibold mb-2">No Independent Advice</h3>
                    <p class="text-gray-600">Every quote comes from someone trying to sell you something. Where's the unbiased analysis?</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Solution Section -->
    <section id="solution" class="py-16 bg-gray-50">
        <div class="max-w-6xl mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12">Introducing Solar Truth AI</h2>
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div>
                    <h3 class="text-2xl font-semibold mb-6">Independent Analysis You Can Trust</h3>
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">‚úì</div>
                            <div>
                                <strong>Personalized System Sizing:</strong> Based on your actual energy usage, work patterns, and lifestyle
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">‚úì</div>
                            <div>
                                <strong>Quote Analysis:</strong> Instantly spot overpriced systems and poor-quality components
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">‚úì</div>
                            <div>
                                <strong>No Installer Bias:</strong> We don't sell solar panels - just honest advice
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">‚úì</div>
                            <div>
                                <strong>UK Market Data:</strong> Real pricing and performance data from thousands of installations
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg">
                    <h4 class="font-semibold mb-4">Sample Analysis Result:</h4>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between">
                            <span>System Size:</span>
                            <span class="font-semibold">6.5kW (not 8kW as quoted)</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Fair Price:</span>
                            <span class="font-semibold">¬£11,200 - ¬£13,800</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Your Quote:</span>
                            <span class="font-semibold text-red-600">¬£16,500 (19% overpriced)</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Panel Quality:</span>
                            <span class="font-semibold text-green-600">Good (Tier 1)</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Payback Period:</span>
                            <span class="font-semibold">10.4 years</span>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-blue-50 rounded">
                        <p class="text-sm"><strong>Recommendation:</strong> Negotiate down to ¬£13,500 or get additional quotes. Consider 6.5kW system instead.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- System Sizing Consultation -->
    <section id="consultation" class="py-16 bg-white">
        <div class="max-w-4xl mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-4">What Solar System Do You Need?</h2>
                <p class="text-xl text-gray-600">Answer 15 quick questions to get your personalized recommendation</p>
            </div>

            <!-- Progress Bar -->
            <div class="mb-8">
                <div class="flex justify-between text-sm text-gray-600 mb-2">
                    <span>Progress</span>
                    <span id="progress-text">1 of 15</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div id="progress-bar" class="progress-bar bg-blue-600 h-2 rounded-full" style="width: 6.67%"></div>
                </div>
            </div>

            <!-- Consultation Questions -->
            <div id="consultation-container">
                <!-- Question 1: Property Type -->
                <div class="consultation-step active" data-step="1">
                    <h3 class="text-2xl font-semibold mb-6">What type of property do you live in?</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="detached">
                            <div class="text-4xl mb-2">üè†</div>
                            <div class="font-medium">Detached House</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="semi-detached">
                            <div class="text-4xl mb-2">üèòÔ∏è</div>
                            <div class="font-medium">Semi-Detached</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="terraced">
                            <div class="text-4xl mb-2">üèöÔ∏è</div>
                            <div class="font-medium">Terraced House</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="bungalow">
                            <div class="text-4xl mb-2">üè°</div>
                            <div class="font-medium">Bungalow</div>
                        </div>
                    </div>
                </div>

                <!-- Question 2: Bedrooms -->
                <div class="consultation-step" data-step="2">
                    <h3 class="text-2xl font-semibold mb-6">How many bedrooms does your home have?</h3>
                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="1">
                            <div class="text-3xl mb-2">1Ô∏è‚É£</div>
                            <div class="font-medium">1 Bedroom</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="2">
                            <div class="text-3xl mb-2">2Ô∏è‚É£</div>
                            <div class="font-medium">2 Bedrooms</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="3">
                            <div class="text-3xl mb-2">3Ô∏è‚É£</div>
                            <div class="font-medium">3 Bedrooms</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="4">
                            <div class="text-3xl mb-2">4Ô∏è‚É£</div>
                            <div class="font-medium">4 Bedrooms</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="5+">
                            <div class="text-3xl mb-2">5Ô∏è‚É£</div>
                            <div class="font-medium">5+ Bedrooms</div>
                        </div>
                    </div>
                </div>

                <!-- Question 3: Occupation -->
                <div class="consultation-step" data-step="3">
                    <h3 class="text-2xl font-semibold mb-6">What best describes your work situation?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="healthcare">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üë©‚Äç‚öïÔ∏è</div>
                                <div>
                                    <div class="font-medium">Healthcare Worker</div>
                                    <div class="text-sm text-gray-600">Nurse, doctor, care worker</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="office">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üíº</div>
                                <div>
                                    <div class="font-medium">Office Worker</div>
                                    <div class="text-sm text-gray-600">Standard 9-5 job</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="teacher">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üë®‚Äçüè´</div>
                                <div>
                                    <div class="font-medium">Teacher</div>
                                    <div class="text-sm text-gray-600">School holidays at home</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="remote">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üè†</div>
                                <div>
                                    <div class="font-medium">Work from Home</div>
                                    <div class="text-sm text-gray-600">Remote worker</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="shift">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üåô</div>
                                <div>
                                    <div class="font-medium">Shift Worker</div>
                                    <div class="text-sm text-gray-600">Rotating or night shifts</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="retired">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üë¥</div>
                                <div>
                                    <div class="font-medium">Retired</div>
                                    <div class="text-sm text-gray-600">Home most of the day</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 4: Work Schedule -->
                <div class="consultation-step" data-step="4">
                    <h3 class="text-2xl font-semibold mb-6">What's your typical work schedule?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="standard-days">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üåÖ</div>
                                <div>
                                    <div class="font-medium">Standard Days (9am-5pm)</div>
                                    <div class="text-sm text-gray-600">Away during peak solar hours</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="shift-rotating">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üåô</div>
                                <div>
                                    <div class="font-medium">Shift Work - Rotating</div>
                                    <div class="text-sm text-gray-600">Variable schedule, sometimes home during day</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="home-days">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üè†</div>
                                <div>
                                    <div class="font-medium">Home During Days</div>
                                    <div class="text-sm text-gray-600">Work from home or retired</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="flexible">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">‚è∞</div>
                                <div>
                                    <div class="font-medium">Flexible Schedule</div>
                                    <div class="text-sm text-gray-600">Can adjust when I use electricity</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 5: Home During Day -->
                <div class="consultation-step" data-step="5">
                    <h3 class="text-2xl font-semibold mb-6">How often are you home during the day (9am-4pm)?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="always">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üè†</div>
                                <div>
                                    <div class="font-medium">Always Home</div>
                                    <div class="text-sm text-gray-600">Retired or work from home</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="often">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üïê</div>
                                <div>
                                    <div class="font-medium">Often Home</div>
                                    <div class="text-sm text-gray-600">3-4 days per week</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="sometimes">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üïë</div>
                                <div>
                                    <div class="font-medium">Sometimes Home</div>
                                    <div class="text-sm text-gray-600">1-2 days per week</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="rarely">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üöó</div>
                                <div>
                                    <div class="font-medium">Rarely Home</div>
                                    <div class="text-sm text-gray-600">Away most weekdays</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 6: Household -->
                <div class="consultation-step" data-step="6">
                    <h3 class="text-2xl font-semibold mb-6">How many people live in your household?</h3>
                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="1">
                            <div class="text-3xl mb-2">üë§</div>
                            <div class="font-medium">1 Person</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="2">
                            <div class="text-3xl mb-2">üë•</div>
                            <div class="font-medium">2 People</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="3">
                            <div class="text-3xl mb-2">üë®‚Äçüë©‚Äçüëß</div>
                            <div class="font-medium">3 People</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="4">
                            <div class="text-3xl mb-2">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                            <div class="font-medium">4 People</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="5+">
                            <div class="text-3xl mb-2">üë®‚Äçüë©‚Äçüëß‚Äçüë¶‚Äçüë∂</div>
                            <div class="font-medium">5+ People</div>
                        </div>
                    </div>
                </div>

                <!-- Question 7: Current Bills -->
                <div class="consultation-step" data-step="7">
                    <h3 class="text-2xl font-semibold mb-6">What's your current monthly electricity bill?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="under-50">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üí∑</div>
                                <div>
                                    <div class="font-medium">Under ¬£50/month</div>
                                    <div class="text-sm text-gray-600">Low usage household</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="50-100">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üí∑üí∑</div>
                                <div>
                                    <div class="font-medium">¬£50-100/month</div>
                                    <div class="text-sm text-gray-600">Average household</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="100-150">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üí∑üí∑üí∑</div>
                                <div>
                                    <div class="font-medium">¬£100-150/month</div>
                                    <div class="text-sm text-gray-600">Above average usage</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="over-150">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üí∑üí∑üí∑üí∑</div>
                                <div>
                                    <div class="font-medium">Over ¬£150/month</div>
                                    <div class="text-sm text-gray-600">High usage household</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 8: EV Plans -->
                <div class="consultation-step" data-step="8">
                    <h3 class="text-2xl font-semibold mb-6">Do you have or plan to get an electric vehicle?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="have-ev">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üöó</div>
                                <div>
                                    <div class="font-medium">Already Have EV</div>
                                    <div class="text-sm text-gray-600">Currently charging at home</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="planning-ev">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üîå</div>
                                <div>
                                    <div class="font-medium">Planning to Get EV</div>
                                    <div class="text-sm text-gray-600">Within next 2-3 years</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="considering-ev">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">ü§î</div>
                                <div>
                                    <div class="font-medium">Considering EV</div>
                                    <div class="text-sm text-gray-600">Might get one eventually</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="no-ev">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">‚õΩ</div>
                                <div>
                                    <div class="font-medium">No EV Plans</div>
                                    <div class="text-sm text-gray-600">Sticking with petrol/diesel</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 9: Heating -->
                <div class="consultation-step" data-step="9">
                    <h3 class="text-2xl font-semibold mb-6">What heating system do you have?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="gas-boiler">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üî•</div>
                                <div>
                                    <div class="font-medium">Gas Boiler</div>
                                    <div class="text-sm text-gray-600">Standard gas central heating</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="heat-pump">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üå°Ô∏è</div>
                                <div>
                                    <div class="font-medium">Heat Pump</div>
                                    <div class="text-sm text-gray-600">Air source or ground source</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="planning-heat-pump">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üîÑ</div>
                                <div>
                                    <div class="font-medium">Planning Heat Pump</div>
                                    <div class="text-sm text-gray-600">Will upgrade from gas boiler</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="electric-heating">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">‚ö°</div>
                                <div>
                                    <div class="font-medium">Electric Heating</div>
                                    <div class="text-sm text-gray-600">Electric radiators or storage heaters</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 10: Home Improvements -->
                <div class="consultation-step" data-step="10">
                    <h3 class="text-2xl font-semibold mb-6">Any planned home improvements that use electricity?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="hot-tub">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üõÅ</div>
                                <div>
                                    <div class="font-medium">Hot Tub/Spa</div>
                                    <div class="text-sm text-gray-600">High electricity usage</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="pool">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üèä</div>
                                <div>
                                    <div class="font-medium">Swimming Pool</div>
                                    <div class="text-sm text-gray-600">Pumps and heating</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="workshop">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üî®</div>
                                <div>
                                    <div class="font-medium">Workshop/Garage</div>
                                    <div class="text-sm text-gray-600">Power tools and equipment</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="none">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üè†</div>
                                <div>
                                    <div class="font-medium">No Major Changes</div>
                                    <div class="text-sm text-gray-600">Standard household usage</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 11: Goals -->
                <div class="consultation-step" data-step="11">
                    <h3 class="text-2xl font-semibold mb-6">What's your main goal with solar?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="save-money">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üí∞</div>
                                <div>
                                    <div class="font-medium">Save Money</div>
                                    <div class="text-sm text-gray-600">Reduce electricity bills</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="environment">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üå±</div>
                                <div>
                                    <div class="font-medium">Help Environment</div>
                                    <div class="text-sm text-gray-600">Reduce carbon footprint</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="independence">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üîã</div>
                                <div>
                                    <div class="font-medium">Energy Independence</div>
                                    <div class="text-sm text-gray-600">Less reliant on grid</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="property-value">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üè°</div>
                                <div>
                                    <div class="font-medium">Increase Property Value</div>
                                    <div class="text-sm text-gray-600">Investment in home</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 12: Battery Interest -->
                <div class="consultation-step" data-step="12">
                    <h3 class="text-2xl font-semibold mb-6">How interested are you in battery storage?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="very-interested">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üîã</div>
                                <div>
                                    <div class="font-medium">Very Interested</div>
                                    <div class="text-sm text-gray-600">Want maximum energy independence</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="somewhat-interested">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">ü§î</div>
                                <div>
                                    <div class="font-medium">Somewhat Interested</div>
                                    <div class="text-sm text-gray-600">If the numbers make sense</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="not-sure">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">‚ùì</div>
                                <div>
                                    <div class="font-medium">Not Sure</div>
                                    <div class="text-sm text-gray-600">Need more information</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="not-interested">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">‚ùå</div>
                                <div>
                                    <div class="font-medium">Not Interested</div>
                                    <div class="text-sm text-gray-600">Just want solar panels</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 13: Roof Orientation -->
                <div class="consultation-step" data-step="13">
                    <h3 class="text-2xl font-semibold mb-6">Which direction does your roof mainly face?</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="south">
                            <div class="text-3xl mb-2">‚òÄÔ∏è</div>
                            <div class="font-medium">South</div>
                            <div class="text-sm text-gray-600">Best for solar</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="south-west">
                            <div class="text-3xl mb-2">üåÖ</div>
                            <div class="font-medium">South-West</div>
                            <div class="text-sm text-gray-600">Very good</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="south-east">
                            <div class="text-3xl mb-2">üåÑ</div>
                            <div class="font-medium">South-East</div>
                            <div class="text-sm text-gray-600">Very good</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="east-west">
                            <div class="text-3xl mb-2">üå§Ô∏è</div>
                            <div class="font-medium">East/West</div>
                            <div class="text-sm text-gray-600">Good</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="north">
                            <div class="text-3xl mb-2">‚òÅÔ∏è</div>
                            <div class="font-medium">North</div>
                            <div class="text-sm text-gray-600">Limited potential</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="multiple">
                            <div class="text-3xl mb-2">üè†</div>
                            <div class="font-medium">Multiple Directions</div>
                            <div class="text-sm text-gray-600">Complex roof</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="not-sure">
                            <div class="text-3xl mb-2">ü§∑</div>
                            <div class="font-medium">Not Sure</div>
                            <div class="text-sm text-gray-600">Need to check</div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 text-center" data-value="flat">
                            <div class="text-3xl mb-2">üìê</div>
                            <div class="font-medium">Flat Roof</div>
                            <div class="text-sm text-gray-600">Can optimize direction</div>
                        </div>
                    </div>
                </div>

                <!-- Question 14: Budget -->
                <div class="consultation-step" data-step="14">
                    <h3 class="text-2xl font-semibold mb-6">What's your budget for a solar system?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="under-8k">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üí∑</div>
                                <div>
                                    <div class="font-medium">Under ¬£8,000</div>
                                    <div class="text-sm text-gray-600">Small system, panels only</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="8k-15k">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üí∑üí∑</div>
                                <div>
                                    <div class="font-medium">¬£8,000 - ¬£15,000</div>
                                    <div class="text-sm text-gray-600">Medium system, maybe small battery</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="15k-25k">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üí∑üí∑üí∑</div>
                                <div>
                                    <div class="font-medium">¬£15,000 - ¬£25,000</div>
                                    <div class="text-sm text-gray-600">Large system with battery storage</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="over-25k">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üí∑üí∑üí∑üí∑</div>
                                <div>
                                    <div class="font-medium">Over ¬£25,000</div>
                                    <div class="text-sm text-gray-600">Premium system, maximum independence</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Question 15: Timeline -->
                <div class="consultation-step" data-step="15">
                    <h3 class="text-2xl font-semibold mb-6">When are you looking to install solar?</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="asap">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üöÄ</div>
                                <div>
                                    <div class="font-medium">As Soon As Possible</div>
                                    <div class="text-sm text-gray-600">Ready to move forward now</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="3-months">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üìÖ</div>
                                <div>
                                    <div class="font-medium">Within 3 Months</div>
                                    <div class="text-sm text-gray-600">Getting quotes and planning</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="6-months">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üóìÔ∏è</div>
                                <div>
                                    <div class="font-medium">Within 6 Months</div>
                                    <div class="text-sm text-gray-600">Still researching options</div>
                                </div>
                            </div>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6" data-value="just-looking">
                            <div class="flex items-center">
                                <div class="text-3xl mr-4">üëÄ</div>
                                <div>
                                    <div class="font-medium">Just Looking</div>
                                    <div class="text-sm text-gray-600">Early research phase</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div id="consultation-results" class="hidden">
                <div class="text-center mb-8">
                    <div class="confidence-badge mb-4">
                        <span id="confidence-score">92% Confidence</span>
                    </div>
                    <h2 class="text-3xl font-bold mb-4">Your Personalized Solar Recommendation</h2>
                    <p class="text-xl text-gray-600">Based on your lifestyle and energy needs</p>
                </div>

                <div class="grid md:grid-cols-2 gap-8 mb-8">
                    <!-- System Overview -->
                    <div class="recommendation-card p-6">
                        <div class="flex items-center mb-4">
                            <div class="system-icon">‚òÄÔ∏è</div>
                            <div class="ml-4">
                                <h3 class="text-xl font-semibold">System Overview</h3>
                                <p class="text-gray-600">Optimized for your needs</p>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>Solar System Size:</span>
                                <span class="font-semibold" id="recommended-size">6.5kW</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Battery Storage:</span>
                                <span class="font-semibold" id="recommended-battery">13.5kWh</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Annual Generation:</span>
                                <span class="font-semibold" id="annual-generation">5,850 kWh</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Self-Consumption:</span>
                                <span class="font-semibold" id="self-consumption">75%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Financial Summary -->
                    <div class="recommendation-card p-6">
                        <div class="flex items-center mb-4">
                            <div class="system-icon">üí∞</div>
                            <div class="ml-4">
                                <h3 class="text-xl font-semibold">Financial Summary</h3>
                                <p class="text-gray-600">Investment and returns</p>
                            </div>
                        </div>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>Total Investment:</span>
                                <span class="font-semibold" id="total-cost">¬£19,250</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Annual Savings:</span>
                                <span class="font-semibold text-green-600" id="annual-savings">¬£1,850</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Payback Period:</span>
                                <span class="font-semibold" id="payback-period">10.4 years</span>
                            </div>
                            <div class="flex justify-between">
                                <span>25-Year Savings:</span>
                                <span class="font-semibold text-green-600" id="total-savings">¬£62,750</span>
                            </div>
                        </div>
                        
                        <!-- Inflation Toggle -->
                        <div class="inflation-toggle">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-sm font-medium">Inflation Rate:</span>
                                <button id="inflation-toggle-btn" class="toggle-button">
                                    Show 7% inflation
                                </button>
                            </div>
                            <div class="text-xs text-gray-600">
                                <span id="inflation-explanation">
                                    Based on 3.5% annual energy price increases (industry standard)
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lifestyle Insights -->
                <div class="recommendation-card insight-card p-6 mb-6">
                    <h3 class="text-xl font-semibold mb-4">üí° Lifestyle Insights</h3>
                    <p id="lifestyle-insights" class="text-gray-700">
                        As a healthcare worker with irregular shifts, your energy usage doesn't align well with solar generation. Your shift work means you need large battery storage for energy flexibility when working nights.
                    </p>
                </div>

                <!-- Optimization Tips -->
                <div class="recommendation-card tips-card p-6 mb-6">
                    <h3 class="text-xl font-semibold mb-4">üéØ Optimization Tips</h3>
                    <ul id="optimization-tips" class="space-y-2 text-gray-700">
                        <li>‚Ä¢ Set your washing machine and dishwasher to run during peak solar hours (11am-3pm)</li>
                        <li>‚Ä¢ Consider a smart EV charger to use excess solar power</li>
                        <li>‚Ä¢ Use battery power during evening peak rate hours (4pm-7pm)</li>
                        <li>‚Ä¢ Monitor your system performance with a smart app</li>
                    </ul>
                </div>

                <!-- Next Steps -->
                <div class="recommendation-card steps-card p-6 mb-8">
                    <h3 class="text-xl font-semibold mb-4">üöÄ Next Steps</h3>
                    <ol id="next-steps" class="space-y-2 text-gray-700">
                        <li>1. Get quotes from 3-4 MCS certified installers</li>
                        <li>2. Use our quote analyzer to check for overpricing</li>
                        <li>3. Ensure quotes match your recommended system size</li>
                        <li>4. Check installer reviews and certifications</li>
                        <li>5. Schedule installation for optimal timing</li>
                    </ol>
                </div>

                <!-- CTA Button -->
                <div class="text-center">
                    <button onclick="scrollToAnalyzer()" class="bg-blue-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-blue-700 transition">
                        Now Analyze Your Quotes
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Quote Analyzer Section -->
    <section id="analyzer" class="py-16 bg-gray-50">
        <div class="max-w-6xl mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold mb-4">Analyze Your Solar Quote Now</h2>
                <p class="text-xl text-gray-600">Get instant analysis of pricing, quality, and value</p>
            </div>

            <!-- Tab Navigation -->
            <div class="flex justify-center mb-8">
                <div class="bg-white rounded-lg p-1 shadow-sm">
                    <button class="tab-button active px-6 py-3 rounded-md font-medium transition" onclick="switchTab('manual')">
                        Manual Entry
                    </button>
                    <button class="tab-button px-6 py-3 rounded-md font-medium transition" onclick="switchTab('pdf')">
                        PDF Upload
                    </button>
                </div>
            </div>

            <!-- Manual Entry Tab -->
            <div id="manual-tab" class="tab-content active">
                <div class="bg-white rounded-lg shadow-lg p-8">
                    <form id="quote-form">
                        <!-- System Size -->
                        <div class="mb-8">
                            <label class="block text-lg font-semibold mb-4">System Size (kW)</label>
                            <div class="grid grid-cols-3 md:grid-cols-6 gap-3">
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-size="2">2kW</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-size="3">3kW</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-size="4">4kW</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-size="5">5kW</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-size="6">6kW</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-size="7">7kW</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-size="8">8kW</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-size="9">9kW</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-size="10">10kW</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-size="12">12kW</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-size="15">15kW</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-size="custom">Custom</button>
                            </div>
                            <div class="custom-input mt-4">
                                <input type="number" id="custom-size" placeholder="Enter custom size (kW)" class="w-full p-3 border border-gray-300 rounded-lg">
                            </div>
                        </div>

                        <!-- Panel Output -->
                        <div class="mb-8">
                            <label class="block text-lg font-semibold mb-4">Panel Output (Watts per panel)</label>
                            <div class="grid grid-cols-3 md:grid-cols-6 gap-3">
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-output="300">300W</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-output="350">350W</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-output="400">400W</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-output="450">450W</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-output="500">500W</button>
                                <button type="button" class="size-button p-3 rounded-lg font-medium" data-output="550">550W</button>
                            </div>
                        </div>

                        <!-- Panel Brand -->
                        <div class="mb-8">
                            <label for="panel-brand" class="block text-lg font-semibold mb-4">Panel Brand</label>
                            <select id="panel-brand" class="w-full p-3 border border-gray-300 rounded-lg">
                                <option value="">Select panel brand...</option>
                                <optgroup label="Premium Brands (Tier 1)">
                                    <option value="longi">LONGi Solar</option>
                                    <option value="jinko">Jinko Solar</option>
                                    <option value="trina">Trina Solar</option>
                                    <option value="canadian">Canadian Solar</option>
                                    <option value="ja-solar">JA Solar</option>
                                    <option value="sunpower">SunPower</option>
                                    <option value="rec">REC Solar</option>
                                    <option value="panasonic">Panasonic</option>
                                </optgroup>
                                <optgroup label="UK Market Brands">
                                    <option value="dmegc">DMEGC</option>
                                    <option value="perlight">Perlight Solar</option>
                                    <option value="aiko">Aiko Solar</option>
                                    <option value="eurener">Eurener</option>
                                    <option value="solfit">SolFiT BIPV</option>
                                    <option value="instagen">InstaGen</option>
                                </optgroup>
                                <optgroup label="Budget Brands">
                                    <option value="risen">Risen Energy</option>
                                    <option value="astronergy">Astronergy</option>
                                    <option value="znshine">Znshine Solar</option>
                                    <option value="seraphim">Seraphim</option>
                                </optgroup>
                                <option value="other">Other (specify in notes)</option>
                            </select>
                        </div>

                        <!-- Battery Options -->
                        <div class="mb-8">
                            <label class="block text-lg font-semibold mb-4">Battery Storage</label>
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <button type="button" id="include-battery" class="size-button p-4 rounded-lg font-medium">
                                    Include Battery
                                </button>
                                <button type="button" id="no-battery" class="size-button p-4 rounded-lg font-medium selected">
                                    No Battery
                                </button>
                            </div>

                            <!-- Battery Models (shown when battery is selected) -->
                            <div id="battery-options" class="battery-models space-y-4">
                                <div>
                                    <label for="battery-brand" class="block font-medium mb-2">Battery Brand</label>
                                    <select id="battery-brand" class="w-full p-3 border border-gray-300 rounded-lg">
                                        <option value="">Select battery brand...</option>
                                        <optgroup label="GivEnergy">
                                            <option value="givenergy-5.12">GivEnergy 5.12kWh GEN3</option>
                                            <option value="givenergy-9.5">GivEnergy 9.5kWh GEN3</option>
                                            <option value="givenergy-14.62">GivEnergy 14.62kWh (3x GEN3)</option>
                                            <option value="givenergy-19.74">GivEnergy 19.74kWh (4x GEN3)</option>
                                        </optgroup>
                                        <optgroup label="Fox ESS">
                                            <option value="fox-2.56">Fox ESS 2.56kWh</option>
                                            <option value="fox-5.12">Fox ESS 5.12kWh</option>
                                            <option value="fox-7.68">Fox ESS 7.68kWh</option>
                                            <option value="fox-10.24">Fox ESS 10.24kWh</option>
                                            <option value="fox-12.8">Fox ESS 12.8kWh</option>
                                        </optgroup>
                                        <optgroup label="SolarEdge">
                                            <option value="solaredge-9.7">SolarEdge 9.7kWh</option>
                                            <option value="solaredge-19.4">SolarEdge 19.4kWh</option>
                                            <option value="solaredge-29.1">SolarEdge 29.1kWh</option>
                                        </optgroup>
                                        <optgroup label="Tesla">
                                            <option value="tesla-13.5">Tesla Powerwall 13.5kWh</option>
                                            <option value="tesla-27">Tesla Powerwall 27kWh (2x units)</option>
                                        </optgroup>
                                        <optgroup label="Huawei">
                                            <option value="huawei-5">Huawei LUNA 5kWh</option>
                                            <option value="huawei-10">Huawei LUNA 10kWh</option>
                                            <option value="huawei-15">Huawei LUNA 15kWh</option>
                                        </optgroup>
                                        <optgroup label="SolaX">
                                            <option value="solax-5.8">SolaX Triple Power 5.8kWh</option>
                                            <option value="solax-11.6">SolaX Triple Power 11.6kWh</option>
                                            <option value="solax-17.4">SolaX Triple Power 17.4kWh</option>
                                        </optgroup>
                                        <optgroup label="Growatt">
                                            <option value="growatt-2.56">Growatt ARK 2.56kWh</option>
                                            <option value="growatt-5.12">Growatt ARK 5.12kWh</option>
                                            <option value="growatt-7.68">Growatt ARK 7.68kWh</option>
                                            <option value="growatt-10.24">Growatt ARK 10.24kWh</option>
                                        </optgroup>
                                        <optgroup label="Enphase">
                                            <option value="enphase-3.36">Enphase IQ Battery 3.36kWh</option>
                                            <option value="enphase-10.08">Enphase IQ Battery 10.08kWh (3x units)</option>
                                            <option value="enphase-13.44">Enphase IQ Battery 13.44kWh (4x units)</option>
                                        </optgroup>
                                        <optgroup label="LG Chem">
                                            <option value="lg-6.5">LG Chem RESU 6.5kWh</option>
                                            <option value="lg-9.8">LG Chem RESU 9.8kWh</option>
                                            <option value="lg-13">LG Chem RESU 13kWh</option>
                                        </optgroup>
                                        <optgroup label="Pylontech">
                                            <option value="pylontech-2.4">Pylontech US2000 2.4kWh</option>
                                            <option value="pylontech-4.8">Pylontech US3000 4.8kWh (2x US2000)</option>
                                            <option value="pylontech-7.2">Pylontech Force L1 7.2kWh (3x US2000)</option>
                                            <option value="pylontech-9.6">Pylontech Force L2 9.6kWh (4x US2000)</option>
                                        </optgroup>
                                        <optgroup label="BYD">
                                            <option value="byd-2.56">BYD Battery-Box LV 2.56kWh</option>
                                            <option value="byd-5.12">BYD Battery-Box LV 5.12kWh</option>
                                            <option value="byd-7.68">BYD Battery-Box LV 7.68kWh</option>
                                            <option value="byd-10.24">BYD Battery-Box LV 10.24kWh</option>
                                        </optgroup>
                                        <optgroup label="Myenergi">
                                            <option value="myenergi-5">Myenergi Libbi 5kWh</option>
                                            <option value="myenergi-10">Myenergi Libbi 10kWh</option>
                                            <option value="myenergi-15">Myenergi Libbi 15kWh</option>
                                            <option value="myenergi-20">Myenergi Libbi 20kWh</option>
                                        </optgroup>
                                        <optgroup label="EcoFlow">
                                            <option value="ecoflow-5">EcoFlow Power Ocean 5kWh</option>
                                            <option value="ecoflow-10">EcoFlow Power Ocean 10kWh</option>
                                            <option value="ecoflow-15">EcoFlow Power Ocean 15kWh</option>
                                        </optgroup>
                                        <option value="other-battery">Other (specify in notes)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Quote Price -->
                        <div class="mb-8">
                            <label for="quote-price" class="block text-lg font-semibold mb-4">Total Quote Price (¬£)</label>
                            <input type="number" id="quote-price" placeholder="e.g. 12500" class="w-full p-3 border border-gray-300 rounded-lg">
                        </div>

                        <!-- Additional Notes -->
                        <div class="mb-8">
                            <label for="notes" class="block text-lg font-semibold mb-4">Additional Notes (Optional)</label>
                            <textarea id="notes" rows="3" placeholder="Any additional details about the quote..." class="w-full p-3 border border-gray-300 rounded-lg"></textarea>
                        </div>

                        <!-- Submit Button -->
                        <div class="text-center">
                            <button type="submit" class="bg-blue-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-blue-700 transition">
                                Analyze Quote
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- PDF Upload Tab -->
            <div id="pdf-tab" class="tab-content">
                <div class="bg-white rounded-lg shadow-lg p-8 text-center">
                    <div class="mb-6">
                        <div class="text-6xl mb-4">üìÑ</div>
                        <h3 class="text-2xl font-semibold mb-2">Upload Your Quote PDF</h3>
                        <p class="text-gray-600">We'll automatically extract and analyze all the details</p>
                    </div>
                    
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-12 mb-6">
                        <input type="file" id="pdf-upload" accept=".pdf" class="hidden">
                        <label for="pdf-upload" class="cursor-pointer">
                            <div class="text-4xl mb-4">üìÅ</div>
                            <div class="text-lg font-medium mb-2">Drop your PDF here or click to browse</div>
                            <div class="text-gray-500">Supports PDF files up to 10MB</div>
                        </label>
                    </div>
                    
                    <button class="bg-blue-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-blue-700 transition">
                        Analyze PDF Quote
                    </button>
                </div>
            </div>

            <!-- Analysis Results -->
            <div id="analysis-results" class="hidden mt-12">
                <div class="bg-white rounded-lg shadow-lg p-8">
                    <h3 class="text-2xl font-bold mb-6 text-center">Quote Analysis Results</h3>
                    
                    <div class="grid md:grid-cols-3 gap-6 mb-8">
                        <!-- Price Assessment -->
                        <div class="text-center p-6 rounded-lg border">
                            <div class="text-3xl mb-2" id="price-emoji">üí∞</div>
                            <div class="text-lg font-semibold mb-2">Price Assessment</div>
                            <div class="text-2xl font-bold" id="price-verdict">Fair Price</div>
                            <div class="text-sm text-gray-600" id="price-details">Within market range</div>
                        </div>

                        <!-- Quality Rating -->
                        <div class="text-center p-6 rounded-lg border">
                            <div class="text-3xl mb-2" id="quality-emoji">‚≠ê</div>
                            <div class="text-lg font-semibold mb-2">Component Quality</div>
                            <div class="text-2xl font-bold" id="quality-verdict">Good Quality</div>
                            <div class="text-sm text-gray-600" id="quality-details">Tier 1 components</div>
                        </div>

                        <!-- Value Score -->
                        <div class="text-center p-6 rounded-lg border">
                            <div class="text-3xl mb-2" id="value-emoji">üìä</div>
                            <div class="text-lg font-semibold mb-2">Overall Value</div>
                            <div class="text-2xl font-bold" id="value-score">8.5/10</div>
                            <div class="text-sm text-gray-600" id="value-details">Excellent value</div>
                        </div>
                    </div>

                    <!-- Detailed Breakdown -->
                    <div class="space-y-6">
                        <div class="border-l-4 border-blue-500 pl-4">
                            <h4 class="font-semibold mb-2">üí° Key Insights</h4>
                            <ul id="key-insights" class="space-y-1 text-gray-700">
                                <li>‚Ä¢ System size is appropriate for your energy needs</li>
                                <li>‚Ä¢ Panel quality is good (Tier 1 manufacturer)</li>
                                <li>‚Ä¢ Price is competitive for current market</li>
                                <li>‚Ä¢ Battery storage will provide good energy independence</li>
                            </ul>
                        </div>

                        <div class="border-l-4 border-yellow-500 pl-4">
                            <h4 class="font-semibold mb-2">‚ö†Ô∏è Things to Consider</h4>
                            <ul id="considerations" class="space-y-1 text-gray-700">
                                <li>‚Ä¢ Get quotes from 2-3 other installers for comparison</li>
                                <li>‚Ä¢ Verify installer is MCS certified</li>
                                <li>‚Ä¢ Check warranty terms and conditions</li>
                                <li>‚Ä¢ Confirm installation timeline and payment schedule</li>
                            </ul>
                        </div>

                        <div class="border-l-4 border-green-500 pl-4">
                            <h4 class="font-semibold mb-2">‚úÖ Recommendations</h4>
                            <ul id="recommendations" class="space-y-1 text-gray-700">
                                <li>‚Ä¢ This quote represents good value for money</li>
                                <li>‚Ä¢ Consider proceeding with this installer</li>
                                <li>‚Ä¢ Negotiate payment terms if needed</li>
                                <li>‚Ä¢ Schedule installation for optimal timing</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 bg-white">
        <div class="max-w-4xl mx-auto text-center px-4">
            <h2 class="text-3xl font-bold mb-8">Get Independent Solar Advice</h2>
            <p class="text-xl text-gray-600 mb-8">
                Have questions? Need help analyzing a complex quote? Our solar experts are here to help.
            </p>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-xl font-semibold mb-4">Free Analysis</h3>
                    <p class="text-gray-600 mb-4">Get instant analysis of your solar quotes with our free tools.</p>
                    <button onclick="scrollToAnalyzer()" class="bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition">
                        Start Analysis
                    </button>
                </div>
                <div class="bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-xl font-semibold mb-4">Expert Consultation</h3>
                    <p class="text-gray-600 mb-4">Book a call with our solar experts for personalized advice.</p>
                    <button class="bg-green-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-700 transition">
                        Book Consultation
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-6xl mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center mb-4">
                        <div class="text-2xl">‚òÄÔ∏è</div>
                        <h3 class="ml-2 text-xl font-bold">Solar Truth AI</h3>
                    </div>
                    <p class="text-gray-400">Independent solar analysis you can trust. No installer bias, just honest advice.</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Tools</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#consultation" class="hover:text-white">System Sizing</a></li>
                        <li><a href="#analyzer" class="hover:text-white">Quote Analysis</a></li>
                        <li><a href="#" class="hover:text-white">ROI Calculator</a></li>
                        <li><a href="#" class="hover:text-white">Installer Reviews</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Resources</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white">Solar Guide</a></li>
                        <li><a href="#" class="hover:text-white">Battery Guide</a></li>
                        <li><a href="#" class="hover:text-white">Installer Directory</a></li>
                        <li><a href="#" class="hover:text-white">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Company</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white">About Us</a></li>
                        <li><a href="#" class="hover:text-white">Contact</a></li>
                        <li><a href="#" class="hover:text-white">Privacy Policy</a></li>
                        <li><a href="#" class="hover:text-white">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2024 Solar Truth AI. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Solar Recommendation Engine with Accurate Payback Calculation
        class SolarRecommendationEngine {
            constructor() {
                this.constants = {
                    // Pricing (¬£ per kW installed)
                    SOLAR_COST_PER_KW: 1850,
                    BATTERY_COST_PER_KWH: 800,
                    
                    // Generation (kWh per kW per year in UK)
                    ANNUAL_GENERATION_PER_KW: 900,
                    
                    // Energy prices and inflation
                    ELECTRICITY_RATE: 0.28, // ¬£ per kWh
                    EXPORT_RATE: 0.15, // ¬£ per kWh
                    INFLATION_RATE_DEFAULT: 0.035, // 3.5% (industry standard)
                    INFLATION_RATE_CURRENT: 0.07, // 7% (current UK inflation)
                    
                    // System efficiency factors
                    SYSTEM_EFFICIENCY: 0.85,
                    BATTERY_EFFICIENCY: 0.90,
                    
                    // Lifestyle factors
                    OCCUPATION_FACTORS: {
                        'healthcare': { homeUsage: 0.3, batteryNeed: 1.4 },
                        'office': { homeUsage: 0.25, batteryNeed: 1.2 },
                        'teacher': { homeUsage: 0.4, batteryNeed: 0.9 },
                        'remote': { homeUsage: 0.7, batteryNeed: 0.6 },
                        'shift': { homeUsage: 0.4, batteryNeed: 1.5 },
                        'retired': { homeUsage: 0.8, batteryNeed: 0.4 }
                    }
                };
            }

            calculateSolarRecommendation(answers) {
                // Base system sizing
                const baseSize = this.calculateBaseSystemSize(answers);
                const batterySize = this.calculateBatterySize(answers, baseSize);
                
                // Financial calculations with proper inflation
                const financials = this.calculateFinancials(baseSize, batterySize, answers);
                
                // Generate insights
                const insights = this.generateInsights(answers, baseSize, batterySize);
                
                return {
                    systemSize: baseSize,
                    batterySize: batterySize,
                    confidence: this.calculateConfidence(answers),
                    ...financials,
                    insights: insights,
                    tips: this.generateOptimizationTips(answers),
                    nextSteps: this.generateNextSteps(answers)
                };
            }

            calculateBaseSystemSize(answers) {
                let baseSize = 4; // Start with 4kW base
                
                // Property type adjustment
                const propertyMultipliers = {
                    'detached': 1.3,
                    'semi-detached': 1.1,
                    'terraced': 0.9,
                    'bungalow': 1.0
                };
                baseSize *= propertyMultipliers[answers.propertyType] || 1.0;
                
                // Bedroom adjustment
                const bedroomMultipliers = {
                    '1': 0.6, '2': 0.8, '3': 1.0, '4': 1.2, '5+': 1.4
                };
                baseSize *= bedroomMultipliers[answers.bedrooms] || 1.0;
                
                // Household size adjustment
                const householdMultipliers = {
                    '1': 0.7, '2': 0.9, '3': 1.0, '4': 1.1, '5+': 1.3
                };
                baseSize *= householdMultipliers[answers.household] || 1.0;
                
                // Bill-based adjustment
                const billMultipliers = {
                    'under-50': 0.7,
                    '50-100': 1.0,
                    '100-150': 1.3,
                    'over-150': 1.6
                };
                baseSize *= billMultipliers[answers.currentBills] || 1.0;
                
                // Future needs
                if (answers.evPlans === 'have-ev' || answers.evPlans === 'planning-ev') {
                    baseSize += 2.5; // Add 2.5kW for EV charging
                }
                
                if (answers.heating === 'heat-pump' || answers.heating === 'planning-heat-pump') {
                    baseSize += 1.5; // Add 1.5kW for heat pump
                }
                
                // Home improvements
                if (answers.homeImprovements === 'hot-tub') baseSize += 1.0;
                if (answers.homeImprovements === 'pool') baseSize += 2.0;
                if (answers.homeImprovements === 'workshop') baseSize += 1.5;
                
                // Budget constraints
                const budgetLimits = {
                    'under-8k': 4.0,
                    '8k-15k': 7.0,
                    '15k-25k': 12.0,
                    'over-25k': 20.0
                };
                const budgetLimit = budgetLimits[answers.budget];
                if (budgetLimit && baseSize > budgetLimit) {
                    baseSize = budgetLimit;
                }
                
                // Round to nearest 0.5kW
                return Math.round(baseSize * 2) / 2;
            }

            calculateBatterySize(answers, systemSize) {
                if (answers.batteryInterest === 'not-interested') return 0;
                
                let batterySize = systemSize * 0.8; // Base: 0.8kWh per kW
                
                // Occupation-based adjustment
                const occupationFactor = this.constants.OCCUPATION_FACTORS[answers.occupation];
                if (occupationFactor) {
                    batterySize *= occupationFactor.batteryNeed;
                }
                
                // Work schedule adjustment
                const scheduleMultipliers = {
                    'standard-days': 1.2,
                    'shift-rotating': 1.5,
                    'home-days': 0.6,
                    'flexible': 0.8
                };
                batterySize *= scheduleMultipliers[answers.workSchedule] || 1.0;
                
                // Home during day adjustment
                const homeDayMultipliers = {
                    'always': 0.5,
                    'often': 0.7,
                    'sometimes': 1.0,
                    'rarely': 1.3
                };
                batterySize *= homeDayMultipliers[answers.homeDuringDay] || 1.0;
                
                // Interest level adjustment
                const interestMultipliers = {
                    'very-interested': 1.3,
                    'somewhat-interested': 1.0,
                    'not-sure': 0.8,
                    'not-interested': 0
                };
                batterySize *= interestMultipliers[answers.batteryInterest] || 1.0;
                
                // EV charging needs
                if (answers.evPlans === 'have-ev' || answers.evPlans === 'planning-ev') {
                    batterySize += 5; // Add 5kWh for EV charging flexibility
                }
                
                // Budget constraints for battery
                const budgetBatteryLimits = {
                    'under-8k': 0,
                    '8k-15k': 5,
                    '15k-25k': 15,
                    'over-25k': 25
                };
                const batteryBudgetLimit = budgetBatteryLimits[answers.budget];
                if (batteryBudgetLimit !== undefined && batterySize > batteryBudgetLimit) {
                    batterySize = batteryBudgetLimit;
                }
                
                // Round to nearest 0.5kWh, minimum 2.5kWh if any battery
                if (batterySize > 0) {
                    batterySize = Math.max(2.5, Math.round(batterySize * 2) / 2);
                }
                
                return batterySize;
            }

            calculateFinancials(systemSize, batterySize, answers) {
                // System costs
                const solarCost = systemSize * this.constants.SOLAR_COST_PER_KW;
                const batteryCost = batterySize * this.constants.BATTERY_COST_PER_KWH;
                const totalCost = solarCost + batteryCost;
                
                // Annual generation and usage
                const annualGeneration = systemSize * this.constants.ANNUAL_GENERATION_PER_KW * this.constants.SYSTEM_EFFICIENCY;
                
                // Self-consumption based on lifestyle
                let selfConsumption = 0.4; // Base 40%
                const occupationFactor = this.constants.OCCUPATION_FACTORS[answers.occupation];
                if (occupationFactor) {
                    selfConsumption = occupationFactor.homeUsage * 0.6 + 0.2; // 20-80% range
                }
                
                // Battery increases self-consumption
                if (batterySize > 0) {
                    const batteryBoost = Math.min(0.3, batterySize / systemSize * 0.1);
                    selfConsumption = Math.min(0.85, selfConsumption + batteryBoost);
                }
                
                // Annual savings calculation
                const selfConsumedEnergy = annualGeneration * selfConsumption;
                const exportedEnergy = annualGeneration * (1 - selfConsumption);
                const annualSavings = (selfConsumedEnergy * this.constants.ELECTRICITY_RATE) + 
                                   (exportedEnergy * this.constants.EXPORT_RATE);
                
                // Payback calculation with inflation (3.5% default)
                const paybackDefault = this.calculateInflationAdjustedPayback(totalCost, annualSavings, this.constants.INFLATION_RATE_DEFAULT);
                const paybackCurrent = this.calculateInflationAdjustedPayback(totalCost, annualSavings, this.constants.INFLATION_RATE_CURRENT);
                
                // 25-year savings with inflation
                const totalSavingsDefault = this.calculateTotalSavingsWithInflation(annualSavings, 25, this.constants.INFLATION_RATE_DEFAULT);
                const totalSavingsCurrent = this.calculateTotalSavingsWithInflation(annualSavings, 25, this.constants.INFLATION_RATE_CURRENT);
                
                return {
                    totalCost: Math.round(totalCost),
                    annualSavings: Math.round(annualSavings),
                    paybackPeriod: paybackDefault,
                    paybackPeriodCurrent: paybackCurrent,
                    totalSavings: Math.round(totalSavingsDefault),
                    totalSavingsCurrent: Math.round(totalSavingsCurrent),
                    annualGeneration: Math.round(annualGeneration),
                    selfConsumption: Math.round(selfConsumption * 100)
                };
            }

            calculateInflationAdjustedPayback(totalCost, annualSavings, inflationRate) {
                let cumulativeSavings = 0;
                let year = 0;
                
                while (cumulativeSavings < totalCost && year < 30) {
                    year++;
                    const yearSavings = annualSavings * Math.pow(1 + inflationRate, year - 1);
                    cumulativeSavings += yearSavings;
                }
                
                return Math.round(year * 10) / 10; // Round to 1 decimal place
            }

            calculateTotalSavingsWithInflation(annualSavings, years, inflationRate) {
                let totalSavings = 0;
                for (let year = 1; year <= years; year++) {
                    totalSavings += annualSavings * Math.pow(1 + inflationRate, year - 1);
                }
                return totalSavings;
            }

            calculateConfidence(answers) {
                let confidence = 85; // Base confidence
                
                // Increase confidence for complete answers
                const completeAnswers = Object.values(answers).filter(v => v && v !== '').length;
                confidence += Math.min(15, completeAnswers);
                
                // Specific high-confidence scenarios
                if (answers.currentBills && answers.currentBills !== '') confidence += 5;
                if (answers.occupation && answers.occupation !== '') confidence += 5;
                if (answers.workSchedule && answers.workSchedule !== '') confidence += 5;
                
                return Math.min(99, confidence);
            }

            generateInsights(answers, systemSize, batterySize) {
                const occupationInsights = {
                    'healthcare': `As a healthcare worker with irregular shifts, your energy usage doesn't align well with solar generation. Your shift work means you need large battery storage for energy flexibility when working nights.`,
                    'office': `As an office worker away during peak solar hours (9am-5pm), you'll benefit significantly from battery storage to use your solar energy in the evenings.`,
                    'teacher': `As a teacher, you're home during school holidays when solar generation is high, giving you good solar alignment. You'll need moderate battery storage for term-time flexibility.`,
                    'remote': `Working from home means excellent solar alignment - you'll use most of your solar energy as it's generated. You need minimal battery storage since you're home during peak solar hours.`,
                    'shift': `Your rotating shift work creates variable energy patterns. Large battery storage is essential to provide flexibility regardless of when you're home or working.`,
                    'retired': `Being retired gives you perfect solar alignment - you're home when the sun shines brightest. You need minimal battery storage since you can time your energy usage with solar generation.`
                };
                
                return occupationInsights[answers.occupation] || 
                       `Based on your lifestyle and energy needs, this system is optimized for your specific situation.`;
            }

            generateOptimizationTips(answers) {
                const tips = [
                    "Set your washing machine and dishwasher to run during peak solar hours (11am-3pm)",
                    "Monitor your system performance with a smart app to optimize usage"
                ];
                
                if (answers.evPlans === 'have-ev' || answers.evPlans === 'planning-ev') {
                    tips.push("Consider a smart EV charger to use excess solar power");
                }
                
                if (answers.batteryInterest !== 'not-interested') {
                    tips.push("Use battery power during evening peak rate hours (4pm-7pm)");
                }
                
                if (answers.occupation === 'shift' || answers.occupation === 'healthcare') {
                    tips.push("Program your battery to charge during off-peak hours when you're working");
                }
                
                return tips;
            }

            generateNextSteps(answers) {
                return [
                    "Get quotes from 3-4 MCS certified installers",
                    "Use our quote analyzer to check for overpricing",
                    "Ensure quotes match your recommended system size",
                    "Check installer reviews and certifications",
                    "Schedule installation for optimal timing"
                ];
            }
        }

        // Global variables
        let currentStep = 1;
        let consultationAnswers = {};
        let selectedSystemSize = null;
        let selectedPanelOutput = null;
        let selectedBatteryBrand = null;
        let hasBattery = false;
        let useCurrentInflation = false;
        const engine = new SolarRecommendationEngine();

        // Consultation functionality
        function initializeConsultation() {
            const options = document.querySelectorAll('.consultation-option');
            options.forEach(option => {
                option.addEventListener('click', function() {
                    const step = this.closest('.consultation-step');
                    const stepNumber = parseInt(step.dataset.step);
                    const value = this.dataset.value;
                    
                    // Remove previous selections in this step
                    step.querySelectorAll('.consultation-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selection to clicked option
                    this.classList.add('selected');
                    
                    // Store answer
                    const questionKeys = [
                        '', 'propertyType', 'bedrooms', 'occupation', 'workSchedule', 'homeDuringDay',
                        'household', 'currentBills', 'evPlans', 'heating', 'homeImprovements',
                        'goals', 'batteryInterest', 'roofOrientation', 'budget', 'timeline'
                    ];
                    consultationAnswers[questionKeys[stepNumber]] = value;
                    
                    // Auto-advance after short delay
                    setTimeout(() => {
                        if (stepNumber < 15) {
                            nextConsultationStep();
                        } else {
                            showConsultationResults();
                        }
                    }, 500);
                });
            });
        }

        function nextConsultationStep() {
            if (currentStep < 15) {
                // Hide current step
                document.querySelector(`[data-step="${currentStep}"]`).classList.remove('active');
                
                // Show next step
                currentStep++;
                document.querySelector(`[data-step="${currentStep}"]`).classList.add('active');
                
                // Update progress
                updateProgress();
            }
        }

        function updateProgress() {
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const percentage = (currentStep / 15) * 100;
            
            progressBar.style.width = percentage + '%';
            progressText.textContent = `${currentStep} of 15`;
        }

        function showConsultationResults() {
            // Hide consultation questions
            document.getElementById('consultation-container').style.display = 'none';
            
            // Calculate recommendation
            const recommendation = engine.calculateSolarRecommendation(consultationAnswers);
            
            // Update results display
            document.getElementById('confidence-score').textContent = `${recommendation.confidence}% Confidence`;
            document.getElementById('recommended-size').textContent = `${recommendation.systemSize}kW`;
            document.getElementById('recommended-battery').textContent = recommendation.batterySize > 0 ? `${recommendation.batterySize}kWh` : 'Not recommended';
            document.getElementById('annual-generation').textContent = `${recommendation.annualGeneration.toLocaleString()} kWh`;
            document.getElementById('self-consumption').textContent = `${recommendation.selfConsumption}%`;
            document.getElementById('total-cost').textContent = `¬£${recommendation.totalCost.toLocaleString()}`;
            document.getElementById('annual-savings').textContent = `¬£${recommendation.annualSavings.toLocaleString()}`;
            document.getElementById('payback-period').textContent = `${recommendation.paybackPeriod} years`;
            document.getElementById('total-savings').textContent = `¬£${recommendation.totalSavings.toLocaleString()}`;
            document.getElementById('lifestyle-insights').textContent = recommendation.insights;
            
            // Update tips and next steps
            const tipsList = document.getElementById('optimization-tips');
            tipsList.innerHTML = recommendation.tips.map(tip => `<li>‚Ä¢ ${tip}</li>`).join('');
            
            const stepsList = document.getElementById('next-steps');
            stepsList.innerHTML = recommendation.nextSteps.map((step, index) => `<li>${index + 1}. ${step}</li>`).join('');
            
            // Set up inflation toggle
            setupInflationToggle(recommendation);
            
            // Show results
            document.getElementById('consultation-results').classList.remove('hidden');
            
            // Store recommendation for quote analyzer
            window.solarRecommendation = recommendation;
        }

        function setupInflationToggle(recommendation) {
            const toggleBtn = document.getElementById('inflation-toggle-btn');
            const paybackElement = document.getElementById('payback-period');
            const savingsElement = document.getElementById('total-savings');
            const explanationElement = document.getElementById('inflation-explanation');
            
            toggleBtn.addEventListener('click', function() {
                useCurrentInflation = !useCurrentInflation;
                
                if (useCurrentInflation) {
                    paybackElement.textContent = `${recommendation.paybackPeriodCurrent} years`;
                    savingsElement.textContent = `¬£${recommendation.totalSavingsCurrent.toLocaleString()}`;
                    explanationElement.textContent = 'Based on 7% annual energy price increases (current UK inflation)';
                    toggleBtn.textContent = 'Show 3.5% inflation';
                } else {
                    paybackElement.textContent = `${recommendation.paybackPeriod} years`;
                    savingsElement.textContent = `¬£${recommendation.totalSavings.toLocaleString()}`;
                    explanationElement.textContent = 'Based on 3.5% annual energy price increases (industry standard)';
                    toggleBtn.textContent = 'Show 7% inflation';
                }
            });
        }

        // Quote analyzer functionality
        function initializeQuoteAnalyzer() {
            // System size buttons
            const sizeButtons = document.querySelectorAll('[data-size]');
            sizeButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove previous selections
                    sizeButtons.forEach(btn => btn.classList.remove('selected'));
                    
                    // Add selection to clicked button
                    this.classList.add('selected');
                    
                    const size = this.dataset.size;
                    if (size === 'custom') {
                        document.querySelector('.custom-input').classList.add('active');
                        selectedSystemSize = null;
                    } else {
                        document.querySelector('.custom-input').classList.remove('active');
                        selectedSystemSize = parseFloat(size);
                    }
                });
            });

            // Panel output buttons
            const outputButtons = document.querySelectorAll('[data-output]');
            outputButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove previous selections
                    outputButtons.forEach(btn => btn.classList.remove('selected'));
                    
                    // Add selection to clicked button
                    this.classList.add('selected');
                    
                    selectedPanelOutput = parseInt(this.dataset.output);
                });
            });

            // Battery options
            const batteryButtons = document.querySelectorAll('#include-battery, #no-battery');
            batteryButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove previous selections
                    batteryButtons.forEach(btn => btn.classList.remove('selected'));
                    
                    // Add selection to clicked button
                    this.classList.add('selected');
                    
                    if (this.id === 'include-battery') {
                        hasBattery = true;
                        document.getElementById('battery-options').classList.add('active');
                    } else {
                        hasBattery = false;
                        document.getElementById('battery-options').classList.remove('active');
                        selectedBatteryBrand = null;
                    }
                });
            });

            // Custom size input
            document.getElementById('custom-size').addEventListener('input', function() {
                selectedSystemSize = parseFloat(this.value) || null;
            });

            // Battery brand selection
            document.getElementById('battery-brand').addEventListener('change', function() {
                selectedBatteryBrand = this.value;
            });

            // Form submission
            document.getElementById('quote-form').addEventListener('submit', function(e) {
                e.preventDefault();
                analyzeQuote();
            });

            // Pre-fill from consultation if available
            if (window.solarRecommendation) {
                prefillFromConsultation();
            }
        }

        function prefillFromConsultation() {
            const recommendation = window.solarRecommendation;
            
            // Pre-select system size
            const sizeButton = document.querySelector(`[data-size="${recommendation.systemSize}"]`);
            if (sizeButton) {
                sizeButton.click();
            } else {
                // Use custom size
                document.querySelector('[data-size="custom"]').click();
                document.getElementById('custom-size').value = recommendation.systemSize;
                selectedSystemSize = recommendation.systemSize;
            }
            
            // Pre-select battery if recommended
            if (recommendation.batterySize > 0) {
                document.getElementById('include-battery').click();
            }
        }

        function analyzeQuote() {
            // Get form data
            const quotePrice = parseFloat(document.getElementById('quote-price').value);
            const panelBrand = document.getElementById('panel-brand').value;
            const notes = document.getElementById('notes').value;
            
            // Validate required fields
            if (!selectedSystemSize || !quotePrice) {
                alert('Please select system size and enter quote price');
                return;
            }
            
            // Perform analysis
            const analysis = performQuoteAnalysis({
                systemSize: selectedSystemSize,
                panelOutput: selectedPanelOutput,
                panelBrand: panelBrand,
                hasBattery: hasBattery,
                batteryBrand: selectedBatteryBrand,
                quotePrice: quotePrice,
                notes: notes
            });
            
            // Display results
            displayAnalysisResults(analysis);
        }

        function performQuoteAnalysis(quoteData) {
            // Calculate expected price range
            const basePricePerKW = 1850;
            const batteryPricePerKWh = 800;
            
            let expectedPrice = quoteData.systemSize * basePricePerKW;
            
            // Add battery cost if included
            if (quoteData.hasBattery && quoteData.batteryBrand) {
                // Extract battery size from brand selection
                const batterySize = extractBatterySize(quoteData.batteryBrand);
                expectedPrice += batterySize * batteryPricePerKWh;
            }
            
            // Price assessment
            const priceRatio = quoteData.quotePrice / expectedPrice;
            let priceVerdict, priceEmoji, priceDetails;
            
            if (priceRatio < 0.85) {
                priceVerdict = "Suspiciously Low";
                priceEmoji = "‚ö†Ô∏è";
                priceDetails = "Check for hidden costs";
            } else if (priceRatio < 1.1) {
                priceVerdict = "Fair Price";
                priceEmoji = "üí∞";
                priceDetails = "Within market range";
            } else if (priceRatio < 1.25) {
                priceVerdict = "Above Average";
                priceEmoji = "üìà";
                priceDetails = "Consider negotiating";
            } else {
                priceVerdict = "Overpriced";
                priceEmoji = "üö®";
                priceDetails = "Significantly above market";
            }
            
            // Quality assessment
            const qualityRating = assessPanelQuality(quoteData.panelBrand);
            
            // Overall value score
            const valueScore = calculateValueScore(priceRatio, qualityRating);
            
            return {
                priceVerdict,
                priceEmoji,
                priceDetails,
                qualityRating,
                valueScore,
                expectedPrice,
                priceRatio
            };
        }

        function extractBatterySize(batteryBrand) {
            // Extract kWh from battery brand string
            const match = batteryBrand.match(/(\d+\.?\d*)/);
            return match ? parseFloat(match[1]) : 5; // Default to 5kWh if not found
        }

        function assessPanelQuality(panelBrand) {
            const tier1Brands = ['longi', 'jinko', 'trina', 'canadian', 'ja-solar', 'sunpower', 'rec', 'panasonic'];
            const goodBrands = ['dmegc', 'perlight', 'aiko', 'eurener'];
            
            if (tier1Brands.includes(panelBrand)) {
                return { verdict: "Excellent Quality", emoji: "‚≠ê", details: "Tier 1 manufacturer" };
            } else if (goodBrands.includes(panelBrand)) {
                return { verdict: "Good Quality", emoji: "üëç", details: "Reliable brand" };
            } else {
                return { verdict: "Average Quality", emoji: "‚ö°", details: "Budget option" };
            }
        }

        function calculateValueScore(priceRatio, qualityRating) {
            let score = 10;
            
            // Price factor
            if (priceRatio > 1.25) score -= 3;
            else if (priceRatio > 1.1) score -= 1;
            else if (priceRatio < 0.85) score -= 2;
            
            // Quality factor
            if (qualityRating.verdict === "Excellent Quality") score += 0;
            else if (qualityRating.verdict === "Good Quality") score -= 0.5;
            else score -= 1;
            
            score = Math.max(1, Math.min(10, score));
            
            let valueEmoji, valueDetails;
            if (score >= 8.5) {
                valueEmoji = "üèÜ";
                valueDetails = "Excellent value";
            } else if (score >= 7) {
                valueEmoji = "üìä";
                valueDetails = "Good value";
            } else if (score >= 5) {
                valueEmoji = "‚öñÔ∏è";
                valueDetails = "Average value";
            } else {
                valueEmoji = "‚ö†Ô∏è";
                valueDetails = "Poor value";
            }
            
            return { score: score.toFixed(1), emoji: valueEmoji, details: valueDetails };
        }

        function displayAnalysisResults(analysis) {
            // Update price assessment
            document.getElementById('price-emoji').textContent = analysis.priceEmoji;
            document.getElementById('price-verdict').textContent = analysis.priceVerdict;
            document.getElementById('price-details').textContent = analysis.priceDetails;
            
            // Update quality rating
            document.getElementById('quality-emoji').textContent = analysis.qualityRating.emoji;
            document.getElementById('quality-verdict').textContent = analysis.qualityRating.verdict;
            document.getElementById('quality-details').textContent = analysis.qualityRating.details;
            
            // Update value score
            document.getElementById('value-emoji').textContent = analysis.valueScore.emoji;
            document.getElementById('value-score').textContent = analysis.valueScore.score + '/10';
            document.getElementById('value-details').textContent = analysis.valueScore.details;
            
            // Generate insights, considerations, and recommendations
            updateAnalysisContent(analysis);
            
            // Show results
            document.getElementById('analysis-results').classList.remove('hidden');
            document.getElementById('analysis-results').scrollIntoView({ behavior: 'smooth' });
        }

        function updateAnalysisContent(analysis) {
            // Key insights
            const insights = [
                `Quote price is ${analysis.priceRatio > 1 ? 'above' : 'below'} market average`,
                `Panel quality is ${analysis.qualityRating.verdict.toLowerCase()}`,
                `Overall value score: ${analysis.valueScore.score}/10`
            ];
            
            if (analysis.priceRatio < 1.1 && analysis.priceRatio > 0.9) {
                insights.push('Price is competitive for current market');
            }
            
            document.getElementById('key-insights').innerHTML = insights.map(insight => `<li>‚Ä¢ ${insight}</li>`).join('');
            
            // Considerations
            const considerations = [
                'Get quotes from 2-3 other installers for comparison',
                'Verify installer is MCS certified',
                'Check warranty terms and conditions',
                'Confirm installation timeline and payment schedule'
            ];
            
            if (analysis.priceRatio > 1.15) {
                considerations.unshift('Price is above market average - consider negotiating');
            }
            
            document.getElementById('considerations').innerHTML = considerations.map(consideration => `<li>‚Ä¢ ${consideration}</li>`).join('');
            
            // Recommendations
            let recommendations = [];
            
            if (analysis.valueScore.score >= 7.5) {
                recommendations.push('This quote represents good value for money');
                recommendations.push('Consider proceeding with this installer');
            } else if (analysis.valueScore.score >= 5) {
                recommendations.push('This quote is acceptable but shop around');
                recommendations.push('Try to negotiate a better price');
            } else {
                recommendations.push('This quote offers poor value');
                recommendations.push('Strongly recommend getting other quotes');
            }
            
            recommendations.push('Negotiate payment terms if needed');
            recommendations.push('Schedule installation for optimal timing');
            
            document.getElementById('recommendations').innerHTML = recommendations.map(rec => `<li>‚Ä¢ ${rec}</li>`).join('');
        }

        // Tab switching
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Scroll functions
        function scrollToConsultation() {
            document.getElementById('consultation').scrollIntoView({ behavior: 'smooth' });
        }

        function scrollToAnalyzer() {
            document.getElementById('analyzer').scrollIntoView({ behavior: 'smooth' });
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeConsultation();
            initializeQuoteAnalyzer();
        });
    </script>
</body>
</html>

