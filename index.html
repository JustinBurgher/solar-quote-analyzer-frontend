<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Truth AI - Don't Get Ripped Off on Solar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hero-gradient {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #60a5fa 100%);
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tab-button.active { background-color: #3b82f6; color: white; }
        .tab-button { background-color: #f8fafc; color: #475569; }
        .size-button { 
            transition: all 0.2s; 
            border: 2px solid #e2e8f0;
            background-color: #ffffff;
        }
        .size-button:hover { 
            border-color: #3b82f6; 
            background-color: #eff6ff;
        }
        .size-button.selected { 
            background-color: #3b82f6; 
            color: white; 
            border-color: #3b82f6;
        }
        .custom-input { display: none; }
        .custom-input.active { display: block; }
        .battery-models { display: none; }
        .battery-models.active { display: block; }
        .consultation-step { display: none; }
        .consultation-step.active { display: block; }
        .progress-bar {
            transition: width 0.3s ease;
        }
        .consultation-option {
            transition: all 0.2s;
            cursor: pointer;
        }
        .consultation-option:hover {
            border-color: #3b82f6 !important;
            background-color: #eff6ff !important;
        }
        .consultation-option.selected {
            border-color: #3b82f6 !important;
            background-color: #eff6ff !important;
        }
        .recommendation-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            transition: all 0.2s;
        }
        .recommendation-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .confidence-badge {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            display: inline-block;
        }
        .insight-card {
            border-left: 4px solid #f59e0b;
            background: #fffbeb;
        }
        .tips-card {
            border-left: 4px solid #8b5cf6;
            background: #f5f3ff;
        }
        .steps-card {
            border-left: 4px solid #3b82f6;
            background: #eff6ff;
        }
        .system-icon {
            width: 48px;
            height: 48px;
            background: #3b82f6;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }
        .hidden { display: none !important; }
        .inflation-toggle {
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 12px;
            margin-top: 8px;
        }
        .toggle-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .toggle-button:hover {
            background: #2563eb;
        }
        
        /* Installer Type Selection Styling */
        .installer-type-option input[type="radio"]:checked + div {
            border-color: #3b82f6;
            background-color: #dbeafe;
        }
        .installer-type-option input[type="radio"]:checked + div .font-semibold {
            color: #1e40af;
        }
        .installer-type-option:hover div {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Mobile Optimization Styles */
        @media (max-width: 768px) {
            /* Typography adjustments for mobile */
            .hero-gradient h2 {
                font-size: 2.5rem !important; /* Reduce from text-5xl to text-4xl equivalent */
                line-height: 1.2 !important;
                margin-bottom: 1rem !important;
            }
            
            .hero-gradient p {
                font-size: 1.125rem !important; /* Reduce from text-xl to text-lg */
                margin-bottom: 2rem !important;
            }

            /* Header mobile optimization */
            .header-title {
                font-size: 1.5rem !important; /* Reduce from text-2xl to text-xl */
            }

            /* Section headings mobile optimization */
            .section-heading {
                font-size: 2rem !important; /* Reduce from text-3xl to text-2xl */
                margin-bottom: 2rem !important;
            }

            .subsection-heading {
                font-size: 1.5rem !important; /* Reduce from text-2xl to text-xl */
                margin-bottom: 1.5rem !important;
            }

            /* Button optimization for mobile */
            .mobile-button {
                min-height: 48px !important; /* Touch-friendly minimum */
                padding: 12px 24px !important;
                font-size: 1rem !important;
                width: 100% !important;
                margin-bottom: 0.75rem !important;
            }

            /* Consultation options mobile optimization */
            .consultation-option {
                padding: 1rem !important;
                margin-bottom: 0.75rem !important;
                min-height: 60px !important; /* Touch-friendly */
            }

            .consultation-option h5 {
                font-size: 1.125rem !important;
                margin-bottom: 0.25rem !important;
            }

            .consultation-option p {
                font-size: 0.875rem !important;
            }

            /* Grid adjustments for mobile */
            .mobile-grid {
                display: block !important;
            }

            .mobile-grid > div {
                margin-bottom: 1.5rem !important;
            }

            /* Form elements mobile optimization */
            .mobile-form-input {
                min-height: 48px !important;
                font-size: 1rem !important;
                padding: 12px !important;
            }

            .mobile-form-select {
                min-height: 48px !important;
                font-size: 1rem !important;
                padding: 12px !important;
            }

            /* Navigation mobile optimization */
            .mobile-nav {
                display: none !important;
            }

            /* Spacing adjustments */
            .mobile-section-padding {
                padding-top: 3rem !important;
                padding-bottom: 3rem !important;
            }

            /* Text size adjustments */
            .mobile-text-base {
                font-size: 1rem !important;
            }

            .mobile-text-sm {
                font-size: 0.875rem !important;
            }

            /* Card adjustments for mobile */
            .mobile-card {
                margin-bottom: 1rem !important;
                padding: 1.25rem !important;
            }

            /* Installer type selection mobile */
            .installer-type-option {
                margin-bottom: 0.75rem !important;
            }

            .installer-type-option div {
                padding: 1rem !important;
                min-height: 60px !important;
            }

            /* Quote analyzer mobile optimization */
            .quote-analyzer-mobile {
                padding: 1rem !important;
            }

            .quote-analyzer-mobile .form-group {
                margin-bottom: 1.5rem !important;
            }

            .quote-analyzer-mobile label {
                font-size: 1rem !important;
                margin-bottom: 0.5rem !important;
                display: block !important;
            }

            /* Results display mobile */
            .results-mobile {
                padding: 1rem !important;
            }

            .results-mobile h3 {
                font-size: 1.5rem !important;
                margin-bottom: 1rem !important;
            }

            .results-mobile .result-item {
                margin-bottom: 1rem !important;
                padding: 0.75rem !important;
            }
        }

        /* Ensure touch targets are large enough */
        @media (max-width: 768px) {
            button, .consultation-option, .size-button, input, select {
                min-height: 44px;
                min-width: 44px;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mr-3">
                        <span class="text-white font-bold text-lg">☀</span>
                    </div>
                    <h1 class="text-2xl header-title font-bold text-gray-900">Solar Truth AI</h1>
                </div>
                <nav class="hidden md:flex mobile-nav space-x-8">
                    <a href="#problem" class="text-gray-600 hover:text-gray-900">The Problem</a>
                    <a href="#solution" class="text-gray-600 hover:text-gray-900">Our Solution</a>
                    <a href="#consultation" class="text-gray-600 hover:text-gray-900">Free Analysis</a>
                    <a href="#pricing" class="text-blue-600 hover:text-blue-700 font-semibold">Pricing</a>
                    <a href="#contact" class="text-gray-600 hover:text-gray-900">Contact</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-gradient text-white py-20 mobile-section-padding">
        <div class="max-w-4xl mx-auto text-center px-4">
            <h2 class="text-5xl font-bold mb-6">Don't Get Ripped Off on Solar</h2>
            <p class="text-xl mb-8 opacity-90">UK homeowners lose thousands on overpriced, undersized solar systems. Get independent, unbiased analysis before you buy.</p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button onclick="scrollToConsultation()" class="bg-white text-blue-600 px-8 py-4 mobile-button rounded-lg font-semibold text-lg hover:bg-gray-100 transition">
                    Find Out What You Need FREE
                </button>
                <button onclick="scrollToAnalyzer()" class="border-2 border-white text-white px-8 py-4 mobile-button rounded-lg font-semibold text-lg hover:bg-white hover:text-blue-600 transition">
                    Analyze My Quote FREE
                </button>
            </div>
        </div>
    </section>

    <!-- Problem Section -->
    <section id="problem" class="py-16 mobile-section-padding bg-white">
        <div class="max-w-6xl mx-auto px-4">
            <h3 class="text-3xl section-heading font-bold text-center mb-12">The Solar Industry Has a Problem</h3>
            <div class="grid md:grid-cols-3 mobile-grid gap-8">
                <div class="text-center mobile-card">
                    <div class="text-4xl mb-4">💸</div>
                    <h4 class="text-xl font-semibold mb-3">Overpriced Systems</h4>
                    <p class="text-gray-600 mobile-text-base">Installers mark up systems by 40-60% because customers can't compare fairly</p>
                </div>
                <div class="text-center mobile-card">
                    <div class="text-4xl mb-4">📉</div>
                    <h4 class="text-xl font-semibold mb-3">Wrong System Size</h4>
                    <p class="text-gray-600 mobile-text-base">Generic calculators ignore your lifestyle, leading to undersized or oversized systems</p>
                </div>
                <div class="text-center mobile-card">
                    <div class="text-4xl mb-4">🤷</div>
                    <h4 class="text-xl font-semibold mb-3">Biased Advice</h4>
                    <p class="text-gray-600 mobile-text-base">Installers recommend what makes them the most profit, not what's best for you</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Solution Section -->
    <section id="solution" class="py-16 mobile-section-padding bg-gray-50">
        <div class="max-w-6xl mx-auto px-4">
            <h3 class="text-3xl section-heading font-bold text-center mb-12">Introducing Solar Truth AI</h3>
            <div class="grid md:grid-cols-2 mobile-grid gap-12 items-center">
                <div>
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">Independent Analysis You Can Trust</h4>
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-3 mt-1">
                                <span class="text-white text-sm">✓</span>
                            </div>
                            <div>
                                <h5 class="font-semibold">Personalized System Sizing</h5>
                                <p class="text-gray-600 mobile-text-base">AI analyzes your lifestyle, work patterns, and energy usage for accurate recommendations</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-3 mt-1">
                                <span class="text-white text-sm">✓</span>
                            </div>
                            <div>
                                <h5 class="font-semibold">Quote Analysis</h5>
                                <p class="text-gray-600 mobile-text-base">Compare installer quotes against fair market prices and quality standards</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-3 mt-1">
                                <span class="text-white text-sm">✓</span>
                            </div>
                            <div>
                                <h5 class="font-semibold">No Installer Bias</h5>
                                <p class="text-gray-600 mobile-text-base">We don't sell solar - just honest, independent advice</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-6 mobile-card rounded-lg shadow-lg">
                    <h5 class="font-semibold mb-4">Sample Analysis Result:</h5>
                    <div class="space-y-3 text-sm mobile-text-sm">
                        <div class="flex justify-between">
                            <span>Recommended System:</span>
                            <span class="font-semibold">6.5kW + 13.5kWh battery</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Fair Price Range:</span>
                            <span class="font-semibold">£16,000 - £19,000</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Your Quote:</span>
                            <span class="font-semibold text-red-600">£24,500 (29% overpriced)</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Panel Quality:</span>
                            <span class="font-semibold text-green-600">Excellent (Tier 1)</span>
                        </div>
                        <div class="pt-2 border-t">
                            <p class="text-xs mobile-text-sm text-gray-600"><strong>Recommendation:</strong> This quote is significantly overpriced. The panels are good quality, but you should negotiate or get additional quotes.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- System Sizing Consultation -->
    <section id="consultation" class="py-16 mobile-section-padding bg-white">
        <div class="max-w-4xl mx-auto px-4">
            <div class="text-center mb-12">
                <h3 class="text-3xl section-heading font-bold mb-4">What Solar System Do You Need?</h3>
                <p class="text-xl mobile-text-base text-gray-600">Answer 14 quick questions to get your personalized recommendation</p>
            </div>

            <!-- Progress Bar -->
            <div class="mb-8">
                <div class="flex justify-between text-sm mobile-text-sm text-gray-600 mb-2">
                    <span>Progress</span>
                    <span id="progress-text">Question 1 of 14</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div id="progress-bar" class="progress-bar bg-blue-600 h-2 rounded-full" style="width: 7.14%"></div>
                </div>
            </div>

            <!-- Consultation Questions -->
            <div id="consultation-container">
                <!-- Question 1: Property Type -->
                <div class="consultation-step active" data-step="1">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">What type of property do you live in?</h4>
                    <div class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 mobile-card text-center" data-value="detached">
                            <div class="text-4xl mb-3">🏘️</div>
                            <h5 class="font-semibold">Detached House</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Standalone property</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 mobile-card text-center" data-value="semi-detached">
                            <div class="text-4xl mb-3">🏡</div>
                            <h5 class="font-semibold">Semi-Detached</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Attached to one other property</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 mobile-card text-center" data-value="terraced">
                            <div class="text-4xl mb-3">🏘️</div>
                            <h5 class="font-semibold">Terraced House</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Row of connected houses</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 mobile-card text-center" data-value="bungalow">
                            <div class="text-4xl mb-3">🏠</div>
                            <h5 class="font-semibold">Bungalow</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Single-story property</p>
                        </div>
                    </div>
                </div>

                <!-- Question 2: Bedrooms -->
                <div class="consultation-step" data-step="2">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">How many bedrooms does your property have?</h4>
                    <div class="grid grid-cols-3 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 mobile-card text-center" data-value="1">
                            <h5 class="font-semibold text-xl">1 Bedroom</h5>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 mobile-card text-center" data-value="2">
                            <h5 class="font-semibold text-xl">2 Bedrooms</h5>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 mobile-card text-center" data-value="3">
                            <h5 class="font-semibold text-xl">3 Bedrooms</h5>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 mobile-card text-center" data-value="4">
                            <h5 class="font-semibold text-xl">4 Bedrooms</h5>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-6 mobile-card text-center" data-value="5+">
                            <h5 class="font-semibold text-xl">5+ Bedrooms</h5>
                        </div>
                    </div>
                </div>

                <!-- Question 3: Occupation -->
                <div class="consultation-step" data-step="3">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">What best describes your work situation?</h4>
                    <div class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="healthcare">
                            <div class="text-3xl mb-2">👩‍⚕️</div>
                            <h5 class="font-semibold">Healthcare Worker</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Nurse, doctor, care worker</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="teacher">
                            <div class="text-3xl mb-2">👨‍🏫</div>
                            <h5 class="font-semibold">Teacher/Education</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Teacher, lecturer, school staff</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="office">
                            <div class="text-3xl mb-2">💼</div>
                            <h5 class="font-semibold">Office Worker</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Standard 9-5 office job</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="shift">
                            <div class="text-3xl mb-2">🏭</div>
                            <h5 class="font-semibold">Shift Worker</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Manufacturing, security, emergency</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="remote">
                            <div class="text-3xl mb-2">💻</div>
                            <h5 class="font-semibold">Remote Worker</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Work from home full-time</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="retired">
                            <div class="text-3xl mb-2">🏡</div>
                            <h5 class="font-semibold">Retired</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">No longer working</p>
                        </div>
                    </div>
                </div>

                <!-- Question 4: Work Schedule -->
                <div class="consultation-step" data-step="4">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">What's your typical work schedule?</h4>
                    <div class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="standard-days">
                            <div class="text-3xl mb-2">🌅</div>
                            <h5 class="font-semibold">Standard Days</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Regular 9am-5pm hours</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="shift-rotating">
                            <div class="text-3xl mb-2">🌙</div>
                            <h5 class="font-semibold">Shift Work - Rotating</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Days, nights, and weekends</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="work-from-home">
                            <div class="text-3xl mb-2">🏠</div>
                            <h5 class="font-semibold">Work from Home</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Flexible home schedule</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="retired">
                            <div class="text-3xl mb-2">😴</div>
                            <h5 class="font-semibold">Retired/No Schedule</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">No work commitments</p>
                        </div>
                    </div>
                </div>

                <!-- Question 5: Home During Day -->
                <div class="consultation-step" data-step="5">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">How often are you home during weekdays (9am-5pm)?</h4>
                    <div class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="rarely">
                            <h5 class="font-semibold">Rarely</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Out most weekdays 9-5</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="sometimes">
                            <h5 class="font-semibold">Sometimes</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Home 1-2 days per week</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="often">
                            <h5 class="font-semibold">Often</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Home 3-4 days per week</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="always">
                            <h5 class="font-semibold">Always</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Home most weekdays</p>
                        </div>
                    </div>
                </div>

                <!-- Question 6: Household -->
                <div class="consultation-step" data-step="6">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">Who lives in your household?</h4>
                    <div class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="just-me">
                            <div class="text-3xl mb-2">👤</div>
                            <h5 class="font-semibold">Just me</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Single person household</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="couple-no-children">
                            <div class="text-3xl mb-2">👫</div>
                            <h5 class="font-semibold">Couple, no children</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Two adults</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="family-young-children">
                            <div class="text-3xl mb-2">👨‍👩‍👧</div>
                            <h5 class="font-semibold">Family with young children</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Children under 12</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="family-teenagers">
                            <div class="text-3xl mb-2">👨‍👩‍👦‍👦</div>
                            <h5 class="font-semibold">Family with teenagers</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Children 12-18</p>
                        </div>
                    </div>
                </div>

                <!-- Question 7: Monthly Bill -->
                <div class="consultation-step" data-step="7">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">What's your average monthly electricity bill?</h4>
                    <div class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="40-70">
                            <h5 class="font-semibold">£40-70</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Lower usage household</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="70-100">
                            <h5 class="font-semibold">£70-100</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Average usage household</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="100-140">
                            <h5 class="font-semibold">£100-140</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Higher usage household</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="140-200">
                            <h5 class="font-semibold">£140-200</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">High usage household</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="200+">
                            <h5 class="font-semibold">£200+</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Very high usage household</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="not-sure">
                            <h5 class="font-semibold">Not sure</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Don't know/varies a lot</p>
                        </div>
                    </div>
                </div>

                <!-- Question 8: EV Plans -->
                <div class="consultation-step" data-step="8">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">Do you have or plan to get an electric vehicle?</h4>
                    <div class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="have-one">
                            <div class="text-3xl mb-2">⚡</div>
                            <h5 class="font-semibold">Yes, I have one now</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Current EV owner</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="planning-2-years">
                            <div class="text-3xl mb-2">📅</div>
                            <h5 class="font-semibold">Planning within 2 years</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Definite EV plans</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="considering-2-5-years">
                            <div class="text-3xl mb-2">🤔</div>
                            <h5 class="font-semibold">Considering in 2-5 years</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Possible future EV</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="no-plans">
                            <div class="text-3xl mb-2">🚫</div>
                            <h5 class="font-semibold">No plans for EV</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Sticking with petrol/diesel</p>
                        </div>
                    </div>
                </div>

                <!-- Question 9: Heating System -->
                <div class="consultation-step" data-step="9">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">What's your current heating system?</h4>
                    <div class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="gas-boiler">
                            <div class="text-3xl mb-2">🔥</div>
                            <h5 class="font-semibold">Gas Boiler</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Traditional gas central heating</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="heat-pump">
                            <div class="text-3xl mb-2">🌡️</div>
                            <h5 class="font-semibold">Heat Pump</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Air source or ground source</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="electric-heating">
                            <div class="text-3xl mb-2">⚡</div>
                            <h5 class="font-semibold">Electric Heating</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Electric radiators/storage heaters</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="oil-boiler">
                            <div class="text-3xl mb-2">🛢️</div>
                            <h5 class="font-semibold">Oil Boiler</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Oil-fired heating</p>
                        </div>
                    </div>
                </div>

                <!-- Question 10: Heat Pump Plans (Conditional) -->
                <div class="consultation-step" data-step="10">
                    <h4 id="heat-pump-question-title" class="text-2xl subsection-heading font-semibold mb-6">Are you considering installing a heat pump?</h4>
                    <div id="heat-pump-options" class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="within-2-years">
                            <h5 class="font-semibold">Yes, within 2 years</h5>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="within-5-years">
                            <h5 class="font-semibold">Yes, within 5 years</h5>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="considering">
                            <h5 class="font-semibold">Considering but unsure when</h5>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="no-plans">
                            <h5 class="font-semibold">No plans for heat pump</h5>
                        </div>
                    </div>
                    <!-- Alternative content for existing heat pump users -->
                    <div id="heat-pump-existing" class="hidden">
                        <div class="bg-green-50 border border-green-200 rounded-lg p-6 text-center">
                            <div class="text-4xl mb-3">✅</div>
                            <h5 class="font-semibold text-green-800 mb-2">Great! You already have a heat pump</h5>
                            <p class="text-green-700 mobile-text-base">We'll factor your existing heat pump into your solar system recommendation and show you the best tariff optimization strategies.</p>
                        </div>
                    </div>
                </div>

                <!-- Question 11: Primary Goal -->
                <div class="consultation-step" data-step="11">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">What's your main reason for considering solar?</h4>
                    <div class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="save-money">
                            <div class="text-3xl mb-2">💵</div>
                            <h5 class="font-semibold">Save money on bills</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Reduce monthly costs</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="environmental">
                            <div class="text-3xl mb-2">🌱</div>
                            <h5 class="font-semibold">Environmental impact</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Reduce carbon footprint</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="energy-independence">
                            <div class="text-3xl mb-2">🔋</div>
                            <h5 class="font-semibold">Energy independence</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Generate own power</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="property-value">
                            <div class="text-3xl mb-2">🏠</div>
                            <h5 class="font-semibold">Increase property value</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Home investment</p>
                        </div>
                    </div>
                </div>

                <!-- Question 12: Battery Interest -->
                <div class="consultation-step" data-step="12">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">How important is battery storage to you?</h4>
                    <div class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="essential">
                            <h5 class="font-semibold">Essential</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Must have battery storage</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="very-interested">
                            <h5 class="font-semibold">Very interested</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Want battery if budget allows</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="somewhat-interested">
                            <h5 class="font-semibold">Somewhat interested</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Depends on cost/benefit</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="not-interested">
                            <h5 class="font-semibold">Not interested</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Just want solar panels</p>
                        </div>
                    </div>
                </div>

                <!-- Question 13: Roof Orientation -->
                <div class="consultation-step" data-step="13">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">Which direction does your main roof face?</h4>
                    <div class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="south">
                            <div class="text-3xl mb-2">☀️</div>
                            <h5 class="font-semibold">South</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Best for solar generation</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="east">
                            <div class="text-3xl mb-2">🌅</div>
                            <h5 class="font-semibold">East</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Good morning generation</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="west">
                            <div class="text-3xl mb-2">🌇</div>
                            <h5 class="font-semibold">West</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Good afternoon generation</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="east-west">
                            <div class="text-3xl mb-2">🔄</div>
                            <h5 class="font-semibold">East/West</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Multiple roof sections</p>
                        </div>
                    </div>
                </div>

                <!-- Question 14: Timeline -->
                <div class="consultation-step" data-step="14">
                    <h4 class="text-2xl subsection-heading font-semibold mb-6">When are you looking to install solar?</h4>
                    <div class="grid grid-cols-2 mobile-grid gap-4">
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="asap">
                            <h5 class="font-semibold">ASAP</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Ready to proceed immediately</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="next-3-months">
                            <h5 class="font-semibold">Next 3 months</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Soon but need time to plan</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="next-6-months">
                            <h5 class="font-semibold">Next 6 months</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">This year definitely</p>
                        </div>
                        <div class="consultation-option border-2 border-gray-200 rounded-lg p-4 mobile-card text-center" data-value="just-researching">
                            <h5 class="font-semibold">Just researching</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Early stages, no timeline</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between mt-8">
                <button id="prev-btn" onclick="previousQuestion()" class="bg-gray-300 text-gray-700 px-6 py-3 mobile-button rounded-lg font-semibold hover:bg-gray-400 transition hidden">
                    Previous
                </button>
                <div class="flex-1"></div>
                <button id="next-btn" onclick="nextQuestion()" class="bg-blue-600 text-white px-6 py-3 mobile-button rounded-lg font-semibold hover:bg-blue-700 transition opacity-50 cursor-not-allowed" disabled>
                    Next Question
                </button>
            </div>

            <!-- Results Section -->
            <div id="consultation-results" class="hidden mt-12">
                <div class="text-center mb-8">
                    <h3 class="text-3xl section-heading font-bold mb-4">Your Personalized Solar Recommendation</h3>
                    <div class="confidence-badge">
                        <span id="confidence-score">92% Confidence</span>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 mobile-grid gap-6 mb-8">
                    <!-- System Overview -->
                    <div class="recommendation-card mobile-card p-6">
                        <div class="flex items-center mb-4">
                            <div class="system-icon mr-4">⚡</div>
                            <h4 class="text-xl font-semibold">System Overview</h4>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                                    <span class="text-blue-600">☀️</span>
                                </div>
                                <div>
                                    <span id="system-size" class="font-semibold text-lg">6.5kW</span>
                                    <span class="text-gray-600 mobile-text-base"> Solar System</span>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                                    <span class="text-blue-600">🔋</span>
                                </div>
                                <div>
                                    <span id="battery-size" class="font-semibold text-lg">13.5kWh</span>
                                    <span class="text-gray-600 mobile-text-base"> Battery Storage</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Financial Summary -->
                    <div class="recommendation-card mobile-card p-6">
                        <h4 class="text-xl font-semibold mb-4">Financial Summary</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-600 mobile-text-base">Total Cost:</span>
                                <span id="total-cost" class="font-semibold">£19,250</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 mobile-text-base">Annual Savings:</span>
                                <span id="annual-savings" class="font-semibold text-green-600">£1,850</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 mobile-text-base">Payback Period:</span>
                                <span id="payback-period" class="font-semibold">10.4 years</span>
                            </div>
                            <div class="inflation-toggle">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm mobile-text-sm text-gray-600">Inflation Rate:</span>
                                    <button id="inflation-toggle-btn" class="toggle-button" onclick="toggleInflationRate()">
                                        Show 7% inflation
                                    </button>
                                </div>
                                <div id="inflation-explanation" class="text-xs mobile-text-sm text-gray-500">
                                    Based on 3.5% annual energy price increases (standard UK assumption)
                                </div>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600 mobile-text-base">25-Year ROI:</span>
                                <span id="roi" class="font-semibold text-green-600">285%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lifestyle Insights -->
                <div class="recommendation-card insight-card mobile-card p-6 mb-6">
                    <h4 class="text-xl font-semibold mb-4">Personalized for Your Lifestyle</h4>
                    <p id="lifestyle-insight" class="text-gray-700 mobile-text-base mb-4">
                        As a healthcare worker with irregular shifts, your energy usage doesn't align well with solar generation. Your shift work means you need large battery storage for energy flexibility when working nights.
                    </p>
                    <p id="battery-insight" class="text-gray-700 mobile-text-base">
                        A 13.5kWh battery gives you excellent energy independence. This size handles most of your evening and night usage, with backup for cloudy days.
                    </p>
                </div>

                <!-- Optimization Tips -->
                <div class="recommendation-card tips-card mobile-card p-6 mb-6">
                    <h4 class="text-xl font-semibold mb-4">Optimization Tips</h4>
                    <ul id="optimization-tips" class="space-y-2 text-gray-700 mobile-text-base">
                        <li>• Run appliances during the day when solar production is highest</li>
                        <li>• Delay EV charging to off-peak hours when possible</li>
                        <li>• Keep battery charge above 20% for longevity</li>
                        <li>• Monitor your battery levels and adjust usage patterns</li>
                    </ul>
                </div>

                <!-- Next Steps -->
                <div class="recommendation-card steps-card mobile-card p-6 mb-8">
                    <h4 class="text-xl font-semibold mb-4">Next Steps</h4>
                    <ol id="next-steps" class="space-y-2 text-gray-700 mobile-text-base">
                        <li>1. Get quotes for a 6.5kW solar system with 13.5kWh battery storage</li>
                        <li>2. Use our quote analyzer below to evaluate each installer's proposal</li>
                        <li>3. Check your roof condition and any planning requirements</li>
                        <li>4. Consider financing options if needed</li>
                        <li>5. Plan your installation timing for best prices</li>
                    </ol>
                </div>

                <!-- Premium Teaser Section -->
                <div class="premium-teaser bg-gradient-to-br from-blue-50 to-indigo-100 border-2 border-blue-200 rounded-lg p-6 mb-8">
                    <div class="text-center mb-6">
                        <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full mb-4">
                            <span class="text-2xl">🚀</span>
                        </div>
                        <h4 class="text-2xl font-bold text-blue-900 mb-2">Unlock Advanced Tariff Optimization</h4>
                        <p class="text-blue-700 mobile-text-base">Get personalized analysis showing how to save an additional £2,400-4,800 over 10 years</p>
                    </div>
                    
                    <div class="grid md:grid-cols-3 mobile-grid gap-4 mb-6">
                        <div class="bg-white rounded-lg p-4 text-center shadow-sm">
                            <div class="text-3xl mb-2">⚡</div>
                            <h5 class="font-semibold text-gray-800 mb-1">EV Charging Strategy</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Octopus Go vs Solar sizing analysis</p>
                        </div>
                        <div class="bg-white rounded-lg p-4 text-center shadow-sm">
                            <div class="text-3xl mb-2">🌡️</div>
                            <h5 class="font-semibold text-gray-800 mb-1">Heat Pump Optimization</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Tariff vs solar heating cost comparison</p>
                        </div>
                        <div class="bg-white rounded-lg p-4 text-center shadow-sm">
                            <div class="text-3xl mb-2">📊</div>
                            <h5 class="font-semibold text-gray-800 mb-1">3-Scenario Analysis</h5>
                            <p class="text-sm mobile-text-sm text-gray-600">Solar-only vs Tariff vs Hybrid strategies</p>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-lg p-4 mb-6">
                        <h5 class="font-semibold text-gray-800 mb-3">Preview: Your Potential Savings</h5>
                        <div class="space-y-2 text-sm mobile-text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">🔋 Current Recommendation (Solar-focused):</span>
                                <span class="font-semibold" id="preview-current-cost">£19,250</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">⚡ Optimized Strategy (Tariff + Solar):</span>
                                <span class="font-semibold text-green-600" id="preview-optimized-cost">£12,800-15,200</span>
                            </div>
                            <div class="flex justify-between border-t pt-2">
                                <span class="text-gray-800 font-semibold">💰 Potential Additional Savings:</span>
                                <span class="font-bold text-green-600" id="preview-savings">£4,050-6,450</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <button onclick="showPremiumModal()" class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-8 py-4 mobile-button rounded-lg font-bold text-lg hover:from-blue-700 hover:to-indigo-700 transition shadow-lg">
                            Unlock Advanced Analysis - £14.99
                        </button>
                        <p class="text-xs mobile-text-sm text-blue-600 mt-2">One-time payment • Instant access • 30-day money-back guarantee</p>
                    </div>
                </div>

                <!-- CTA Buttons -->
                <div class="text-center space-y-4">
                    <button onclick="scrollToAnalyzer()" class="bg-blue-600 text-white px-8 py-4 mobile-button rounded-lg font-semibold text-lg hover:bg-blue-700 transition">
                        Now Analyze Your Quotes
                    </button>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                        <button onclick="restartConsultation()" class="bg-gray-600 text-white px-6 py-3 mobile-button rounded-lg font-semibold hover:bg-gray-700 transition">
                            🔄 Take Consultation Again
                        </button>
                        <span class="text-gray-500 mobile-text-sm">Want to try different answers or run it for someone else?</span>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Quote Analyzer Section -->
    <section id="analyzer" class="py-16 mobile-section-padding bg-gray-50">
        <div class="max-w-4xl mx-auto px-4">
            <div class="text-center mb-12">
                <h3 class="text-3xl section-heading font-bold mb-4">Analyze Your Solar Quote Now</h3>
                <p class="text-xl mobile-text-base text-gray-600">Get instant analysis of any solar quote - completely free and unbiased</p>
            </div>

            <!-- Tab Navigation -->
            <div class="flex mb-8 bg-white rounded-lg p-1 shadow-sm">
                <button class="tab-button active flex-1 py-3 px-6 mobile-button rounded-md font-semibold transition" onclick="switchTab('manual')">
                    Manual Entry
                </button>
                <button class="tab-button flex-1 py-3 px-6 mobile-button rounded-md font-semibold transition" onclick="switchTab('pdf')">
                    PDF Upload
                </button>
            </div>

            <!-- Manual Entry Tab -->
            <div id="manual-tab" class="tab-content active">
                <div class="bg-white rounded-lg shadow-lg p-8 quote-analyzer-mobile">
                    <form id="quote-form" onsubmit="handleQuoteAnalysis(event)">
                        <!-- Installer Type Selection -->
                        <div class="mb-8 p-4 bg-blue-50 rounded-lg border border-blue-200 form-group">
                            <label class="block text-lg font-semibold mb-4 text-blue-800">Who gave you this quote?</label>
                            <p class="text-sm mobile-text-sm text-blue-600 mb-4">This helps us provide more accurate pricing analysis based on different installer types.</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 mobile-grid gap-4">
                                <label class="installer-type-option cursor-pointer" onclick="selectInstallerType('volume')">
                                    <input type="radio" name="installer-type" value="volume" class="sr-only" checked>
                                    <div id="volume-option" class="p-4 border-2 border-blue-300 rounded-lg bg-blue-100 transition hover:bg-blue-200 mobile-card">
                                        <div class="font-semibold text-blue-800">Volume Installer</div>
                                        <div class="text-sm mobile-text-sm text-blue-600 mt-1">Octopus Energy, EON, EDF, GlowGreen, Heatable, BOXT, Wickes, etc.</div>
                                    </div>
                                </label>
                                <label class="installer-type-option cursor-pointer" onclick="selectInstallerType('traditional')">
                                    <input type="radio" name="installer-type" value="traditional" class="sr-only">
                                    <div id="traditional-option" class="p-4 border-2 border-gray-300 rounded-lg bg-gray-50 transition hover:bg-gray-100 mobile-card">
                                        <div class="font-semibold text-gray-700">Local/Traditional Installer</div>
                                        <div class="text-sm mobile-text-sm text-gray-600 mt-1">Smaller local companies, independent installers</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- System Size -->
                        <div class="mb-8 form-group">
                            <label class="block text-lg font-semibold mb-4">System Size (kW)</label>
                            <div class="grid grid-cols-5 mobile-grid gap-3">
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-size="2">2kW</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-size="3">3kW</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-size="4">4kW</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-size="5">5kW</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-size="6">6kW</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-size="7">7kW</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-size="8">8kW</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-size="9">9kW</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-size="10">10kW</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-size="custom">Custom</button>
                            </div>
                            <div id="custom-size-input" class="custom-input mt-4">
                                <input type="number" step="0.1" placeholder="Enter system size (e.g., 8.24 for 8.24kW or 8240 for 8240W)" class="w-full p-3 mobile-form-input border border-gray-300 rounded-lg">
                                <p class="text-sm mobile-text-sm text-gray-600 mt-1">You can enter in kW (e.g., 8.24) or W (e.g., 8240) - we'll convert automatically</p>
                            </div>
                        </div>

                        <!-- Panel Output -->
                        <div class="mb-8 form-group">
                            <label class="block text-lg font-semibold mb-4">Panel Output (Watts per panel)</label>
                            <div class="grid grid-cols-4 mobile-grid gap-3">
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-output="300">300W</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-output="350">350W</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-output="400">400W</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-output="450">450W</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-output="500">500W</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-output="550">550W</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-output="600">600W</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-output="custom-output">Custom</button>
                            </div>
                            <div id="custom-output-input" class="custom-input mt-4">
                                <input type="number" placeholder="Enter custom output (W)" class="w-full p-3 mobile-form-input border border-gray-300 rounded-lg">
                            </div>
                        </div>

                        <!-- Panel Brand -->
                        <div class="mb-8 form-group">
                            <label class="block text-lg font-semibold mb-4">Panel Brand</label>
                            <select id="panel-brand-select" class="w-full p-3 mobile-form-select border border-gray-300 rounded-lg">
                                <option value="">Select panel brand...</option>
                                <optgroup label="Premium Brands (Excellent)">
                                    <option value="sunpower">SunPower</option>
                                    <option value="panasonic">Panasonic</option>
                                    <option value="lg">LG Solar</option>
                                    <option value="rec">REC Solar</option>
                                </optgroup>
                                <optgroup label="Tier 1 Brands (Very Good)">
                                    <option value="dmegc">DMEGC</option>
                                    <option value="perlight">Perlight</option>
                                    <option value="longi">LONGi Solar</option>
                                    <option value="jinko">Jinko Solar</option>
                                    <option value="trina">Trina Solar</option>
                                    <option value="canadian">Canadian Solar</option>
                                    <option value="ja-solar">JA Solar</option>
                                    <option value="risen">Risen Energy</option>
                                    <option value="aiko">Aiko Solar</option>
                                    <option value="eurener">Eurener</option>
                                </optgroup>
                                <optgroup label="Good Brands">
                                    <option value="qcells">Q CELLS</option>
                                    <option value="solaria">Solaria</option>
                                    <option value="silfab">Silfab Solar</option>
                                    <option value="astronergy">Astronergy</option>
                                    <option value="seraphim">Seraphim</option>
                                </optgroup>
                                <optgroup label="Budget Brands">
                                    <option value="yingli">Yingli Solar</option>
                                    <option value="renesola">ReneSola</option>
                                    <option value="boviet">Boviet Solar</option>
                                </optgroup>
                                <option value="other">Other (specify in notes)</option>
                            </select>
                        </div>

                        <!-- Battery Section -->
                        <div class="mb-8 form-group">
                            <label class="block text-lg font-semibold mb-4">Battery Storage</label>
                            <div class="grid grid-cols-2 gap-4 mb-4">
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-battery="none">No Battery</button>
                                <button type="button" class="size-button py-3 px-4 mobile-form-input rounded-lg font-semibold" data-battery="yes">Include Battery</button>
                            </div>
                            
                            <div id="battery-details" class="battery-models space-y-4">
                                <div class="flex flex-col md:flex-row items-end gap-4">
                                    <div class="flex-grow w-full">
                                        <label class="block font-semibold mb-2">Battery Brand & Model</label>
                                        <select id="battery-brand-select" class="w-full p-3 mobile-form-select border border-gray-300 rounded-lg">
                                            <option value="">Select battery...</option>
                                            <optgroup label="Fox ESS">
                                                <option value="fox-ess-ep11">Fox ESS EP11 (10.36kWh)</option>
                                                <option value="fox-ess-ep5">Fox ESS EP5 (5.18kWh)</option>
                                                <option value="fox-ess-eq4800">Fox ESS EQ4800 (4.66kWh)</option>
                                                <option value="fox-ess-hv2600">Fox ESS HV2600 (2.6kWh)</option>
                                                <option value="fox-ess-ecs2900">Fox ESS ECS2900 (2.88kWh)</option>
                                                <option value="fox-ess-ecs4300">Fox ESS ECS4300 (4.14kWh)</option>
                                                <option value="fox-ess-ec4100">Fox ESS Energy Cube (4.03kWh)</option>
                                            </optgroup>
                                            <optgroup label="GivEnergy">
                                                <option value="givenergy-2.6">GivEnergy Giv-Bat 2.6kWh</option>
                                                <option value="givenergy-5.2">GivEnergy Giv-Bat 5.2kWh GEN3</option>
                                                <option value="givenergy-9.5">GivEnergy Giv-Bat 9.5kWh GEN3</option>
                                                <option value="givenergy-stack3">GivEnergy Stack-3 (10.2kWh)</option>
                                                <option value="givenergy-stack4">GivEnergy Stack-4 (13.6kWh)</option>
                                                <option value="givenergy-stack5">GivEnergy Stack-5 (17.0kWh)</option>
                                                <option value="givenergy-stack6">GivEnergy Stack-6 (20.4kWh)</option>
                                                <option value="givenergy-aio-6">GivEnergy All in One 6.0 (13.5kWh)</option>
                                                <option value="givenergy-aio-3.6">GivEnergy All in One 3.6 (13.5kWh)</option>
                                            </optgroup>
                                            <optgroup label="Tesla">
                                                <option value="tesla-powerwall-2">Tesla Powerwall 2 (13.5kWh)</option>
                                                <option value="tesla-powerwall-3">Tesla Powerwall 3 (13.5kWh)</option>
                                            </optgroup>
                                            <optgroup label="SolarEdge">
                                                <option value="solaredge-10">SolarEdge Energy Bank 10kWh</option>
                                                <option value="solaredge-9.7">SolarEdge Home Battery 9.7kWh</option>
                                                <option value="solaredge-23">SolarEdge Home Battery 23kWh</option>
                                            </optgroup>
                                            <optgroup label="Pylontech">
                                                <option value="pylontech-us3000c">Pylontech US3000C (3.55kWh)</option>
                                                <option value="pylontech-us5000">Pylontech US5000-1C (4.8kWh)</option>
                                                <option value="pylontech-h48074">Pylontech H48074 (3.55kWh)</option>
                                                <option value="pylontech-force-h2">Pylontech FORCE H2 (14.21kWh)</option>
                                            </optgroup>
                                            <optgroup label="Alpha ESS">
                                                <option value="alpha-ess-5.7">Alpha ESS SMILE5 (5.7kWh)</option>
                                                <option value="alpha-ess-5.04">Alpha ESS SMILE-B3 PLUS (5.04kWh)</option>
                                                <option value="alpha-ess-12">Alpha ESS SMILE G3 (12kWh)</option>
                                                <option value="alpha-ess-2.9">Alpha ESS Battery Module (2.9kWh)</option>
                                                <option value="alpha-ess-10.1">Alpha ESS Battery Module (10.1kWh)</option>
                                            </optgroup>
                                            <optgroup label="Sonnen">
                                                <option value="sonnen-10">sonnenBatterie 10 (5.5-22kWh)</option>
                                                <option value="sonnen-eco">sonnenBatterie eco</option>
                                                <option value="sonnen-hybrid">sonnenBatterie hybrid</option>
                                            </optgroup>
                                            <optgroup label="Enphase">
                                                <option value="enphase-iq-5p">Enphase IQ Battery 5P (5.0kWh)</option>
                                                <option value="enphase-iq-3t">Enphase IQ Battery 3T (3.36kWh)</option>
                                                <option value="enphase-iq-10t">Enphase IQ Battery 10T (10.08kWh)</option>
                                            </optgroup>
                                            <optgroup label="Other Brands">
                                                <option value="duracell-5.12">Duracell Energy Bank 5.12kWh</option>
                                                <option value="solax-5.8">SolaX Triple Power 5.8kWh</option>
                                            </optgroup>
                                            <option value="other-battery">Other (specify below)</option>
                                        </select>
                                    </div>
                                    <div class="w-full md:w-auto">
                                        <label class="block font-semibold mb-2">Quantity</label>
                                        <select id="battery-quantity" class="w-full p-3 mobile-form-select border border-gray-300 rounded-lg">
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4+</option>
                                        </select>
                                    </div>
                                </div>
                                <div id="custom-battery-input" class="custom-input mt-4">
                                    <input type="text" placeholder="Enter custom battery model and capacity (e.g., MyBattery 10kWh)" class="w-full p-3 mobile-form-input border border-gray-300 rounded-lg">
                                </div>
                            </div>
                        </div>

                        <!-- Total Price -->
                        <div class="mb-8 form-group">
                            <label class="block text-lg font-semibold mb-4">Total Quote Price (£)</label>
                            <input id="total-price-input" type="number" placeholder="Enter total price including VAT" class="w-full p-3 mobile-form-input border border-gray-300 rounded-lg text-lg">
                        </div>

                        <!-- Additional Notes -->
                        <div class="mb-8 form-group">
                            <label class="block text-lg font-semibold mb-4">Additional Notes (Optional)</label>
                            <textarea id="notes-textarea" placeholder="Any additional details about the quote, installer, or specific requirements..." class="w-full p-3 mobile-form-input border border-gray-300 rounded-lg h-24"></textarea>
                        </div>

                        <!-- Analyze Button -->
                        <button type="submit" class="w-full bg-blue-600 text-white py-4 mobile-button rounded-lg font-semibold text-lg hover:bg-blue-700 transition">
                            Analyze This Quote FREE
                        </button>
                    </form>
                </div>
            </div>

            <!-- PDF Upload Tab -->
            <div id="pdf-tab" class="tab-content">
                <div class="bg-white rounded-lg shadow-lg p-8 mobile-card text-center">
                    <div class="mb-6">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-blue-600 text-2xl">📄</span>
                        </div>
                        <h4 class="text-xl font-semibold mb-2">Upload Your Solar Quote</h4>
                        <p class="text-gray-600 mobile-text-base">Drag and drop your PDF quote or click to browse</p>
                    </div>
                    
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 mb-6 hover:border-blue-400 transition">
                        <input type="file" accept=".pdf" class="hidden" id="pdf-upload">
                        <label for="pdf-upload" class="cursor-pointer">
                            <div class="text-gray-400 mb-2">
                                <span class="text-4xl">📁</span>
                            </div>
                            <p class="text-gray-600 mobile-text-base">Click here or drag your PDF quote</p>
                            <p class="text-sm mobile-text-sm text-gray-500 mt-2">Supports PDF files up to 10MB</p>
                        </label>
                    </div>
                    
                    <button class="bg-blue-600 text-white py-3 px-8 mobile-button rounded-lg font-semibold hover:bg-blue-700 transition">
                        Analyze PDF Quote
                    </button>
                </div>
            </div>

            <!-- Quote Analysis Results -->
            <div id="quote-results" class="hidden mt-12 results-mobile"></div>

        </div>
    </section>

    <!-- Dedicated Pricing Page Section -->
    <section id="pricing" class="py-16 mobile-section-padding bg-gradient-to-br from-gray-50 to-blue-50">
        <div class="max-w-6xl mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-4xl mobile-text-3xl font-bold text-gray-800 mb-4">Choose Your Protection Level</h2>
                <p class="text-xl mobile-text-lg text-gray-600 max-w-3xl mx-auto">From basic tariff optimization to complete contract protection - we've got you covered at every level</p>
            </div>

            <!-- Pricing Comparison Table -->
            <div class="grid md:grid-cols-3 mobile-grid gap-8 mb-12">
                <!-- Basic Analysis -->
                <div class="bg-white rounded-xl shadow-lg p-8 mobile-card border border-gray-200 hover:shadow-xl transition">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-3xl">⚡</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-800">Basic Analysis</h3>
                        <div class="text-4xl font-bold text-blue-600 mt-2">£14.99</div>
                        <div class="text-gray-500 text-sm mobile-text-sm">One-time payment</div>
                    </div>
                    
                    <div class="space-y-4 mb-8">
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">Tariff Optimization Analysis</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Compare solar vs time-of-use tariffs</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">3-Scenario Comparison</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Solar-only, tariff-only, hybrid strategies</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">Personalized Recommendations</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Based on your lifestyle and usage</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">EV & Heat Pump Strategies</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Specialized optimization for EVs and heat pumps</div>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="showPremiumModal('basic')" class="w-full bg-blue-600 text-white py-3 px-6 mobile-button rounded-lg font-semibold hover:bg-blue-700 transition">
                        Get Basic Analysis
                    </button>
                </div>

                <!-- Pro Analysis -->
                <div class="bg-white rounded-xl shadow-xl p-8 mobile-card border-2 border-blue-500 relative transform scale-105">
                    <div class="absolute -top-4 left-1/2 transform -translate-x-1/2">
                        <span class="bg-blue-500 text-white px-4 py-2 rounded-full text-sm font-bold">MOST POPULAR</span>
                    </div>
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-3xl">🛡️</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-800">Pro Analysis</h3>
                        <div class="text-4xl font-bold text-blue-600 mt-2">£29.99</div>
                        <div class="text-gray-500 text-sm mobile-text-sm">One-time payment</div>
                    </div>
                    
                    <div class="space-y-4 mb-8">
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">Everything in Basic</div>
                                <div class="text-sm mobile-text-sm text-gray-600">All tariff optimization features</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-blue-500 mr-3 mt-1">★</div>
                            <div>
                                <div class="font-semibold text-blue-600">Contract Red Flag Analysis</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Upload PDF contracts for instant analysis</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-blue-500 mr-3 mt-1">★</div>
                            <div>
                                <div class="font-semibold text-blue-600">Expert Consultation Call</div>
                                <div class="text-sm mobile-text-sm text-gray-600">30-minute call with solar expert</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-blue-500 mr-3 mt-1">★</div>
                            <div>
                                <div class="font-semibold text-blue-600">Detailed Savings Report</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Downloadable PDF with full analysis</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">Installation Timeline Planning</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Step-by-step installation guidance</div>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="showPremiumModal('pro')" class="w-full bg-blue-600 text-white py-3 px-6 mobile-button rounded-lg font-semibold hover:bg-blue-700 transition">
                        Get Pro Analysis
                    </button>
                </div>

                <!-- Complete Package -->
                <div class="bg-white rounded-xl shadow-lg p-8 mobile-card border border-gray-200 hover:shadow-xl transition">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-3xl">🏆</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-800">Complete Package</h3>
                        <div class="text-4xl font-bold text-blue-600 mt-2">£49.99</div>
                        <div class="text-gray-500 text-sm mobile-text-sm">One-time payment</div>
                    </div>
                    
                    <div class="space-y-4 mb-8">
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">Everything in Pro</div>
                                <div class="text-sm mobile-text-sm text-gray-600">All analysis and contract features</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-purple-500 mr-3 mt-1">★</div>
                            <div>
                                <div class="font-semibold text-purple-600">Multiple Contract Comparison</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Compare up to 5 quotes side-by-side</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-purple-500 mr-3 mt-1">★</div>
                            <div>
                                <div class="font-semibold text-purple-600">Priority Expert Support</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Direct access to solar experts</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-purple-500 mr-3 mt-1">★</div>
                            <div>
                                <div class="font-semibold text-purple-600">6-Month Follow-up Support</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Ongoing support after installation</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">Performance Monitoring Setup</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Help setting up system monitoring</div>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="showPremiumModal('complete')" class="w-full bg-blue-600 text-white py-3 px-6 mobile-button rounded-lg font-semibold hover:bg-blue-700 transition">
                        Get Complete Package
                    </button>
                </div>
            </div>

            <!-- Trust Signals -->
            <div class="bg-white rounded-lg p-8 mobile-card shadow-lg">
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4">Why Choose Solar Truth AI?</h3>
                </div>
                
                <div class="grid md:grid-cols-3 mobile-grid gap-8">
                    <div class="text-center">
                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-green-600 text-xl">🛡️</span>
                        </div>
                        <h4 class="font-semibold text-gray-800 mb-2">Independent Analysis</h4>
                        <p class="text-gray-600 text-sm mobile-text-sm">No installer bias - just honest, data-driven recommendations</p>
                    </div>
                    <div class="text-center">
                        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-blue-600 text-xl">💰</span>
                        </div>
                        <h4 class="font-semibold text-gray-800 mb-2">Money-Back Guarantee</h4>
                        <p class="text-gray-600 text-sm mobile-text-sm">30-day full refund if you're not completely satisfied</p>
                    </div>
                    <div class="text-center">
                        <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-purple-600 text-xl">⚡</span>
                        </div>
                        <h4 class="font-semibold text-gray-800 mb-2">Instant Results</h4>
                        <p class="text-gray-600 text-sm mobile-text-sm">Get your analysis immediately after payment</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 mobile-section-padding">
        <div class="max-w-6xl mx-auto px-4">
            <!-- Pricing Section -->
            <div class="mb-12 text-center">
                <h3 class="text-2xl font-bold mb-2">Choose Your Analysis Level</h3>
                <p class="text-gray-400 mobile-text-base mb-8">From basic recommendations to complete contract protection</p>
                
                <div class="grid md:grid-cols-3 mobile-grid gap-6 max-w-5xl mx-auto">
                    <!-- Basic Analysis -->
                    <div class="bg-gray-800 rounded-lg p-6 mobile-card border border-gray-700 hover:border-blue-500 transition">
                        <div class="text-center mb-4">
                            <div class="text-2xl mb-2">⚡</div>
                            <h4 class="text-xl font-bold text-blue-400">Basic Analysis</h4>
                            <div class="text-3xl font-bold mt-2">£14.99</div>
                            <div class="text-gray-400 text-sm mobile-text-sm">One-time payment</div>
                        </div>
                        <ul class="space-y-2 text-sm mobile-text-sm text-gray-300 mb-6">
                            <li>✓ Tariff optimization analysis</li>
                            <li>✓ 3-scenario comparison</li>
                            <li>✓ Personalized recommendations</li>
                            <li>✓ EV & heat pump strategies</li>
                        </ul>
                        <button onclick="showPremiumModal('basic')" class="w-full bg-blue-600 text-white py-2 px-4 mobile-button rounded-lg font-semibold hover:bg-blue-700 transition">
                            Get Basic Analysis
                        </button>
                    </div>
                    
                    <!-- Pro Analysis -->
                    <div class="bg-gray-800 rounded-lg p-6 mobile-card border-2 border-blue-500 relative">
                        <div class="absolute -top-3 left-1/2 transform -translate-x-1/2">
                            <span class="bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-bold">POPULAR</span>
                        </div>
                        <div class="text-center mb-4">
                            <div class="text-2xl mb-2">🛡️</div>
                            <h4 class="text-xl font-bold text-blue-400">Pro Analysis</h4>
                            <div class="text-3xl font-bold mt-2">£29.99</div>
                            <div class="text-gray-400 text-sm mobile-text-sm">One-time payment</div>
                        </div>
                        <ul class="space-y-2 text-sm mobile-text-sm text-gray-300 mb-6">
                            <li>✓ Everything in Basic</li>
                            <li>✓ <strong>Contract red flag analysis</strong></li>
                            <li>✓ Expert consultation call</li>
                            <li>✓ Detailed savings report</li>
                            <li>✓ Installation timeline planning</li>
                        </ul>
                        <button onclick="showPremiumModal('pro')" class="w-full bg-blue-600 text-white py-2 px-4 mobile-button rounded-lg font-semibold hover:bg-blue-700 transition">
                            Get Pro Analysis
                        </button>
                    </div>
                    
                    <!-- Complete Package -->
                    <div class="bg-gray-800 rounded-lg p-6 mobile-card border border-gray-700 hover:border-blue-500 transition">
                        <div class="text-center mb-4">
                            <div class="text-2xl mb-2">🏆</div>
                            <h4 class="text-xl font-bold text-blue-400">Complete Package</h4>
                            <div class="text-3xl font-bold mt-2">£49.99</div>
                            <div class="text-gray-400 text-sm mobile-text-sm">One-time payment</div>
                        </div>
                        <ul class="space-y-2 text-sm mobile-text-sm text-gray-300 mb-6">
                            <li>✓ Everything in Pro</li>
                            <li>✓ <strong>Multiple contract comparison</strong></li>
                            <li>✓ Priority expert support</li>
                            <li>✓ 6-month follow-up support</li>
                            <li>✓ Performance monitoring setup</li>
                        </ul>
                        <button onclick="showPremiumModal('complete')" class="w-full bg-blue-600 text-white py-2 px-4 mobile-button rounded-lg font-semibold hover:bg-blue-700 transition">
                            Get Complete Package
                        </button>
                    </div>
                </div>
                
                <div class="mt-6 text-center">
                    <a href="#pricing" class="text-blue-400 hover:text-blue-300 text-sm mobile-text-sm">View detailed pricing comparison →</a>
                </div>
            </div>
            
            <div class="grid md:grid-cols-4 mobile-grid gap-8">
                <div class="mobile-card">
                    <div class="flex items-center mb-4">
                        <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mr-2">
                            <span class="text-white font-bold">☀</span>
                        </div>
                        <h3 class="text-xl font-bold">Solar Truth AI</h3>
                    </div>
                    <p class="text-gray-400 mobile-text-base">Independent solar analysis you can trust. No installer bias, just honest advice.</p>
                </div>
                <div class="mobile-card">
                    <h4 class="font-semibold mb-4">Services</h4>
                    <ul class="space-y-2 text-gray-400 mobile-text-base">
                        <li><a href="#consultation" class="hover:text-white">System Sizing</a></li>
                        <li><a href="#analyzer" class="hover:text-white">Quote Analysis</a></li>
                        <li><a href="#pricing" class="hover:text-white">Pricing</a></li>
                        <li><a href="#" class="hover:text-white">Performance Monitoring</a></li>
                    </ul>
                </div>
                <div class="mobile-card">
                    <h4 class="font-semibold mb-4">Resources</h4>
                    <ul class="space-y-2 text-gray-400 mobile-text-base">
                        <li><a href="#" class="hover:text-white">Solar Guide</a></li>
                        <li><a href="#" class="hover:text-white">Battery Guide</a></li>
                        <li><a href="#" class="hover:text-white">ROI Calculator</a></li>
                        <li><a href="#" class="hover:text-white">FAQ</a></li>
                    </ul>
                </div>
                <div class="mobile-card">
                    <h4 class="font-semibold mb-4">Contact</h4>
                    <ul class="space-y-2 text-gray-400 mobile-text-base">
                        <li>Email: hello@solartruth.ai</li>
                        <li>Phone: 0800 123 4567</li>
                        <li>Mon-Fri: 9am-6pm</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p class="mobile-text-sm">&copy; 2025 Solar Truth AI. All rights reserved. | <a href="#" class="hover:text-white">Privacy Policy</a> | <a href="#" class="hover:text-white">Terms of Service</a></p>
            </div>
        </div>
    </footer>


    <!-- Solar Recommendation Algorithm -->
    <script>
        /**
         * Solar Truth AI - Lifestyle-Based Recommendation Algorithm
         * Fixed version with proper inflation-adjusted payback calculation
         */
        class SolarRecommendationEngine {
            constructor() {
                this.constants = {
                    solarGenerationPerKW: 900,
                    // Default to volume player pricing for consultation recommendations
                    systemCostPerKW: 1100, // Volume player pricing
                    batteryCostPerKWh: 700, // Volume player pricing
                    // Two-tier pricing system (2025 UK market rates)
                    volumeInstaller: {
                        systemCostPerKW: 1100, // Volume players: Octopus, EON, EDF, GlowGreen, etc.
                        batteryCostPerKWh: 700
                    },
                    traditionalInstaller: {
                        systemCostPerKW: 1400, // Traditional/local installers
                        batteryCostPerKWh: 800
                    },
                    panelCostPerWatt: 0.80, // £0.80 per Watt for panels only
                    electricityPrice: 0.30,
                    exportPrice: 0.05,
                    systemEfficiency: 0.85,
                    batteryEfficiency: 0.90,
                    standardInflationRate: 0.035, 
                    currentInflationRate: 0.07,   
                    roofMultipliers: {
                        'south': 1.0,
                        'east': 0.85,
                        'west': 0.85,
                        'east-west': 0.90,
                        'north': 0.60,
                        'multiple': 0.85
                    }
                };
                
                this.occupationProfiles = {
                    'healthcare': {
                        batteryMultiplier: 1.3, // Reduced from 2.5
                        usageVariability: 'high',
                        solarAlignment: 'poor',
                        description: 'Irregular shifts require moderate battery for flexibility'
                    },
                    'teacher': {
                        batteryMultiplier: 1.1, // Reduced from 1.5
                        usageVariability: 'medium',
                        solarAlignment: 'good',
                        description: 'School schedule aligns well with solar, battery helps during holidays'
                    },
                    'office': {
                        batteryMultiplier: 1.2, // Reduced from 2.0
                        usageVariability: 'low',
                        solarAlignment: 'poor',
                        description: 'Away during peak solar hours, battery essential for evening usage'
                    },
                    'shift': {
                        batteryMultiplier: 1.5, // Reduced from 3.0
                        usageVariability: 'very-high',
                        solarAlignment: 'very-poor',
                        description: 'Rotating shifts require enhanced battery flexibility'
                    },
                    'remote': {
                        batteryMultiplier: 0.8, // Reduced from 1.0
                        usageVariability: 'low',
                        solarAlignment: 'excellent',
                        description: 'Home during solar hours, excellent direct usage potential'
                    },
                    'retired': {
                        batteryMultiplier: 0.8,
                        usageVariability: 'low',
                        solarAlignment: 'excellent',
                        description: 'Perfect solar alignment, minimal battery needed'
                    }
                };
            }
            
            calculateSolarRecommendation(customerData) {
                const baseSystemSize = this.calculateBaseSystemSize(customerData);
                const adjustedSystemSize = this.applyLifestyleModifiers(baseSystemSize, customerData);
                const batterySize = this.calculateBatterySize(adjustedSystemSize, customerData);
                const finalSystem = {
                    systemSize: adjustedSystemSize,
                    batterySize: batterySize
                };
                const financials = this.calculateFinancials(finalSystem, customerData);
                const insights = this.generateInsights(finalSystem, customerData, financials);
                
                return {
                    system: finalSystem,
                    financials: financials,
                    insights: insights,
                    confidence: this.calculateConfidence(customerData)
                };
            }
            
            calculateBaseSystemSize(data) {
                let baseSize = 4;
                
                const bedroomMultipliers = {
                    '1': 0.75, '2': 1.0, '3': 1.25, '4': 1.5, '5+': 1.75
                };
                baseSize *= bedroomMultipliers[data.bedrooms] || 1.0;
                
                const billMultipliers = {
                    '40-70': 0.8, '70-100': 1.0, '100-140': 1.3, '140-200': 1.6, '200+': 2.0
                };
                baseSize *= billMultipliers[data.monthlyBill] || 1.0;
                
                const householdMultipliers = {
                    'just-me': 0.7, 'couple-no-children': 0.9, 'family-young-children': 1.2, 'family-teenagers': 1.4
                };
                baseSize *= householdMultipliers[data.household] || 1.0;
                
                return Math.round(baseSize * 2) / 2;
            }
            
            applyLifestyleModifiers(baseSize, data) {
                let adjustedSize = baseSize;
                
                // More conservative EV sizing - consider tariff optimization
                const evMultipliers = {
                    'have-one': 1.2,        // Reduced from 1.5 - tariffs often better for EV charging
                    'planning-2-years': 1.15, // Reduced from 1.3
                    'considering-2-5-years': 1.05, // Reduced from 1.1
                    'no-plans': 1.0
                };
                adjustedSize *= evMultipliers[data.evPlans] || 1.0;
                
                // More conservative heat pump sizing - consider tariff optimization
                if (data.heatingSystem === 'heat-pump' || data.heatPumpPlans === 'already-have') {
                    adjustedSize *= 1.3; // Reduced from 1.8 - tariffs often better for heat pumps
                } else if (data.heatPumpPlans === 'within-2-years') {
                    adjustedSize *= 1.2; // Reduced from 1.6
                } else if (data.heatPumpPlans === 'within-5-years') {
                    adjustedSize *= 1.1; // Reduced from 1.3
                }
                
                const wfhMultipliers = {
                    'rarely': 0.9, 'sometimes': 1.0, 'often': 1.1, 'always': 1.2, 'varies': 1.05
                };
                adjustedSize *= wfhMultipliers[data.homeDuringDay] || 1.0;
                
                return Math.round(adjustedSize * 2) / 2;
            }
            
            calculateBatterySize(systemSize, data) {
                let batterySize = systemSize * 1.2; // Reduced from 1.5
                
                const occupation = this.getOccupationCategory(data.occupation);
                const profile = this.occupationProfiles[occupation];
                if (profile) {
                    batterySize *= profile.batteryMultiplier;
                }
                
                const scheduleMultipliers = {
                    'standard-days': 1.1, // Reduced from 1.5
                    'shift-rotating': 1.4, // Reduced from 2.5
                    'work-from-home': 0.8, 
                    'retired': 0.6
                };
                batterySize *= scheduleMultipliers[data.workSchedule] || 1.1;
                
                const interestMultipliers = {
                    'essential': 1.1, // Reduced from 1.2
                    'very-interested': 1.0, 
                    'somewhat-interested': 0.8, 
                    'not-interested': 0.0
                };
                batterySize *= interestMultipliers[data.batteryInterest] || 1.0;
                
                if (data.batteryInterest === 'not-interested') return 0;
                
                batterySize = Math.max(5, batterySize);
                batterySize = Math.min(15, batterySize); // Reduced from 25
                
                return Math.round(batterySize * 2) / 2;
            }
            
            calculateFinancials(system, data) {
                const roofMultiplier = this.constants.roofMultipliers[data.roofOrientation] || 0.85;
                const annualGeneration = system.systemSize * this.constants.solarGenerationPerKW * roofMultiplier;
                
                const selfConsumptionRate = this.calculateSelfConsumptionRate(data, system.batterySize);
                const selfConsumption = Math.min(annualGeneration * selfConsumptionRate, this.estimateAnnualUsage(data));
                const export_ = Math.max(0, annualGeneration - selfConsumption);
                
                const savingsFromSelfUse = selfConsumption * this.constants.electricityPrice;
                const incomeFromExport = export_ * this.constants.exportPrice;
                const annualSavings = savingsFromSelfUse + incomeFromExport;
                
                const systemCost = (system.systemSize * this.constants.systemCostPerKW) + 
                                  (system.batterySize * this.constants.batteryCostPerKWh);
                
                const paybackYears = this.calculateInflationAdjustedPayback(systemCost, annualSavings, this.constants.standardInflationRate);
                const paybackYears7Percent = this.calculateInflationAdjustedPayback(systemCost, annualSavings, this.constants.currentInflationRate);
                
                const totalSavings25Years = this.calculateTotalSavingsWithInflation(annualSavings, 25, this.constants.standardInflationRate);
                const netSavings25Years = totalSavings25Years - systemCost;
                const roi = (netSavings25Years / systemCost) * 100;
                
                return {
                    systemCost: Math.round(systemCost),
                    annualGeneration: Math.round(annualGeneration),
                    annualSavings: Math.round(annualSavings),
                    paybackYears: Math.round(paybackYears * 10) / 10,
                    paybackYears7Percent: Math.round(paybackYears7Percent * 10) / 10,
                    totalSavings25Years: Math.round(totalSavings25Years),
                    netSavings25Years: Math.round(netSavings25Years),
                    roi: Math.round(roi),
                    selfConsumption: Math.round(selfConsumption),
                    export: Math.round(export_),
                    selfConsumptionRate: Math.round(selfConsumptionRate * 100)
                };
            }
            
            calculateInflationAdjustedPayback(systemCost, annualSavings, inflationRate) {
                let cumulativeSavings = 0;
                let year = 0;
                
                while (cumulativeSavings < systemCost && year < 30) {
                    year++;
                    const yearSavings = annualSavings * Math.pow(1 + inflationRate, year - 1);
                    cumulativeSavings += yearSavings;
                }
                
                if (year > 1) {
                    const prevCumulativeSavings = cumulativeSavings - (annualSavings * Math.pow(1 + inflationRate, year - 1));
                    const yearSavings = annualSavings * Math.pow(1 + inflationRate, year - 1);
                    const remainingCost = systemCost - prevCumulativeSavings;
                    const fractionOfYear = remainingCost / yearSavings;
                    return (year - 1) + fractionOfYear;
                }
                
                return year;
            }
            
            calculateTotalSavingsWithInflation(annualSavings, years, inflationRate) {
                let totalSavings = 0;
                for (let year = 1; year <= years; year++) {
                    totalSavings += annualSavings * Math.pow(1 + inflationRate, year - 1);
                }
                return totalSavings;
            }
            
            calculateSelfConsumptionRate(data, batterySize) {
                let baseRate = batterySize > 0 ? 0.7 : 0.3;
                
                const occupation = this.getOccupationCategory(data.occupation);
                const occupationRates = {
                    'healthcare': 0.4, 'teacher': 0.6, 'office': 0.3, 'shift': 0.35, 
                    'remote': 0.8, 'retired': 0.85
                };
                
                const occupationRate = occupationRates[occupation] || 0.5;
                
                if (batterySize > 0) {
                    return Math.min(0.9, (baseRate + occupationRate) / 2);
                } else {
                    return occupationRate;
                }
            }
            
            estimateAnnualUsage(data) {
                const billToUsage = {
                    '40-70': 2800, '70-100': 3500, '100-140': 4500, '140-200': 6000, '200+': 8000
                };
                
                let annualUsage = billToUsage[data.monthlyBill] || 4000;
                
                if (data.evPlans === 'have-one') annualUsage += 3000;
                if (data.evPlans === 'planning-2-years') annualUsage += 2500;
                if (data.heatingSystem === 'heat-pump') annualUsage += 4000;
                if (data.heatPumpPlans === 'within-2-years') annualUsage += 3500;
                
                return annualUsage;
            }
            
            generateInsights(system, data, financials) {
                const occupation = this.getOccupationCategory(data.occupation);
                const profile = this.occupationProfiles[occupation];
                
                return {
                    lifestyleMatch: this.generateLifestyleInsight(data, profile, occupation),
                    batteryRecommendation: this.generateBatteryInsight(system, data),
                    financialHighlight: this.generateFinancialInsight(financials),
                    optimizationTips: this.generateOptimizationTips(data, system),
                    nextSteps: this.generateNextSteps(system)
                };
            }
            
            generateLifestyleInsight(data, profile, occupation) {
                const insights = {
                    'healthcare': `As a healthcare worker with irregular shifts, your energy usage doesn't align well with solar generation. ${profile.description}. This system is designed to store solar energy during your shifts for use when you're home.`,
                    'teacher': `Your teaching schedule aligns well with solar generation during term time. ${profile.description}. You'll see excellent direct usage during school holidays when you're home more.`,
                    'office': `Working standard office hours means you're away during peak solar generation. ${profile.description}. Your battery will charge during the day and power your home in the evenings.`,
                    'shift': `Rotating shift work creates unpredictable energy patterns. ${profile.description}. The large battery ensures you have stored solar energy regardless of your current shift pattern.`,
                    'remote': `Working from home gives you excellent solar alignment. ${profile.description}. You'll use most of your solar energy directly, minimizing battery needs and maximizing savings.`,
                    'retired': `Your retirement lifestyle perfectly matches solar generation patterns. ${profile.description}. You'll achieve excellent direct usage with minimal reliance on the grid.`
                };
                
                return insights[occupation] || `Your lifestyle has been analyzed to optimize your solar system design. The recommended system balances your energy needs with your daily patterns.`;
            }
            
            generateBatteryInsight(system, data) {
                if (system.batterySize === 0) {
                    return "No battery recommended based on your excellent solar alignment and budget preferences. You'll export excess energy to the grid.";
                }
                
                const batterySize = system.batterySize;
                const sizeCategory = batterySize < 8 ? 'small' : batterySize < 15 ? 'medium' : 'large';
                
                const insights = {
                    'small': `A ${batterySize}kWh battery provides essential backup for your lifestyle while keeping costs reasonable. This covers your evening usage and provides some flexibility.`,
                    'medium': `A ${batterySize}kWh battery gives you excellent energy independence. This size handles most of your evening and night usage, with backup for cloudy days.`,
                    'large': `A ${batterySize}kWh battery provides maximum flexibility for your variable lifestyle. This large capacity ensures you have stored solar energy whenever you need it, regardless of weather or schedule changes.`
                };
                
                return insights[sizeCategory];
            }
            
            generateFinancialInsight(financials) {
                const payback = financials.paybackYears;
                const annualSavings = financials.annualSavings;
                const roi = financials.roi;
                
                if (payback < 8) {
                    return `Excellent financial returns! With £${annualSavings.toLocaleString()} annual savings and ${payback} year payback, this system delivers strong value. Your 25-year ROI of ${roi}% significantly outperforms most investments.`;
                } else if (payback < 12) {
                    return `Good financial returns with £${annualSavings.toLocaleString()} annual savings and ${payback} year payback. Your 25-year ROI of ${roi}% provides solid long-term value while reducing energy bills immediately.`;
                } else {
                    return `Moderate financial returns with ${payback} year payback. While the payback is longer, you'll still save £${financials.netSavings25Years.toLocaleString()} over 25 years. Consider if environmental benefits and energy independence justify the investment.`;
                }
            }
            
            generateOptimizationTips(data, system) {
                const tips = [];
                const occupation = this.getOccupationCategory(data.occupation);
                
                if (occupation === 'office') {
                    tips.push("Run dishwashers and washing machines on timers during sunny days to maximize direct solar usage");
                    tips.push("Consider smart plugs to automatically run appliances when solar generation is high");
                }
                
                if (occupation === 'remote') {
                    tips.push("Your work-from-home schedule is perfect for solar - use high-energy appliances during your lunch breaks");
                    tips.push("Consider an electric vehicle to use excess solar generation");
                }
                
                if (system.batterySize > 10) {
                    tips.push("With your large battery, you can run appliances in the evening using stored solar energy");
                    tips.push("Monitor your battery levels and adjust usage patterns to maximize solar storage");
                }
                
                if (data.evPlans !== 'no-plans') {
                    tips.push("Time your EV charging for sunny afternoons to use direct solar power");
                    tips.push("Consider a smart EV charger that automatically uses excess solar generation");
                }
                
                return tips;
            }
            
            generateNextSteps(system) {
                return [
                    `Get quotes for a ${system.systemSize}kW solar system${system.batterySize > 0 ? ` with ${system.batterySize}kWh battery storage` : ''}`,
                    "Use our quote analyzer below to evaluate each installer's proposal",
                    "Check your roof condition and any planning requirements",
                    "Consider financing options if needed - solar loans often have better rates than personal loans",
                    "Plan your installation timing - spring/summer installations often get better prices"
                ];
            }
            
            calculateConfidence(data) {
                let confidence = 85;
                
                if (data.monthlyBill === 'not-sure') confidence -= 10;
                if (data.roofOrientation === 'not-sure') confidence -= 15;
                if (data.batteryInterest === 'need-advice') confidence -= 5;
                
                const occupation = this.getOccupationCategory(data.occupation);
                if (['remote', 'retired', 'office'].includes(occupation)) confidence += 5;
                
                return Math.min(95, Math.max(70, confidence));
            }
            
            getOccupationCategory(occupation) {
                const mapping = {
                    'healthcare': 'healthcare', 'teacher': 'teacher', 'office': 'office',
                    'shift': 'shift', 'remote': 'remote', 'retired': 'retired'
                };
                return mapping[occupation] || 'office';
            }
        }

        // Quote Analyzer Functions
        function handleQuoteAnalysis(event) {
            event.preventDefault();
            
            const formData = collectQuoteData();
            
            if (!validateQuoteData(formData)) {
                alert('Please fill in all required fields (System Size, Panel Output, and Total Price)');
                return;
            }
            
            const analysis = analyzeQuote(formData);
            
            displayQuoteAnalysis(analysis);
            
            document.getElementById('quote-results').classList.remove('hidden');
            document.getElementById('quote-results').scrollIntoView({ behavior: 'smooth' });
        }

        function collectQuoteData() {
            const customSize = document.querySelector('#custom-size-input input').value;
            const customOutput = document.querySelector('#custom-output-input input').value;
            const customBattery = document.querySelector('#custom-battery-input input').value;

            // Get raw system size
            let rawSystemSize = selectedSystemSize === 'custom' ? customSize : selectedSystemSize;
            
            // Validate and convert system size
            let systemSize = validateAndConvertSystemSize(rawSystemSize);

            return {
                systemSize: systemSize,
                panelOutput: selectedPanelOutput === 'custom-output' ? customOutput : selectedPanelOutput,
                panelBrand: document.getElementById('panel-brand-select').value,
                hasBattery: selectedBattery === 'yes',
                batteryBrand: document.getElementById('battery-brand-select').value,
                batteryQuantity: document.getElementById('battery-quantity').value,
                customBattery: customBattery,
                totalPrice: document.getElementById('total-price-input').value,
                notes: document.getElementById('notes-textarea').value,
                installerType: document.querySelector('input[name="installer-type"]:checked')?.value || 'volume'
            };
        }

        function validateAndConvertSystemSize(input) {
            if (!input) return null;
            
            let size = parseFloat(input);
            if (isNaN(size)) return null;
            
            // If the number is very large (>100), assume it's in watts and convert to kW
            if (size > 100) {
                size = size / 1000;
            }
            
            // Apply residential limits (0.5kW minimum, 20kW maximum)
            if (size < 0.5) {
                alert('System size too small. Minimum residential system size is 0.5kW.');
                return null;
            }
            if (size > 20) {
                alert('System size too large. Maximum residential system size is 20kW. For larger systems, please contact us directly.');
                return null;
            }
            
            return size;
        }

        function validateQuoteData(data) {
            return data.systemSize && data.panelOutput && data.totalPrice;
        }

        function analyzeQuote(data) {
            const systemSize = parseFloat(data.systemSize);
            const totalPrice = parseFloat(data.totalPrice);
            
            // Validate system size
            if (isNaN(systemSize) || systemSize <= 0) {
                return {
                    error: true,
                    message: "Invalid system size. Please check your input."
                };
            }
            
            let batteryCapacity = 0;
            if (data.hasBattery) {
                if (data.batteryBrand === 'other-battery') {
                    const match = data.customBattery.match(/(\d+(\.\d+)?)\s*kWh/i);
                    if (match) {
                        batteryCapacity = parseFloat(match[1]) * parseInt(data.batteryQuantity);
                    }
                } else {
                    // Extract battery capacity from comprehensive battery database
                    batteryCapacity = extractBatteryCapacity(data.batteryBrand) * parseInt(data.batteryQuantity);
                }
            }
            
            // Get installer type selection for pricing
            const installerType = data.installerType || 'volume';
            console.log('Installer type selected:', installerType); // Debug log
            
            // Apply two-tier pricing based on installer type
            const pricing = installerType === 'volume' ? 
                { systemCost: 1100, batteryCost: 700 } :   // Volume players
                { systemCost: 1400, batteryCost: 800 };    // Traditional installers
            
            console.log('Pricing used:', pricing); // Debug log
            console.log('System size:', systemSize, 'Battery capacity:', batteryCapacity); // Debug log
            
            const systemCost = systemSize * pricing.systemCost;
            const batteryCost = batteryCapacity * pricing.batteryCost;
            const fairPrice = systemCost + batteryCost;
            const fairPriceMin = fairPrice * 0.9;
            const fairPriceMax = fairPrice * 1.2;
            
            let priceAssessment, priceColor;
            if (totalPrice < fairPriceMin) {
                priceAssessment = "Excellent value";  // Changed for volume player pricing
                priceColor = "text-green-600";
            } else if (totalPrice <= fairPriceMax) {
                priceAssessment = "Fair price";
                priceColor = "text-green-600";
            } else if (totalPrice <= fairPriceMax * 1.3) {
                priceAssessment = "Slightly overpriced";
                priceColor = "text-orange-600";
            } else {
                priceAssessment = "Significantly overpriced";
                priceColor = "text-red-600";
            }
            
            const panelQuality = assessPanelBrand(data.panelBrand);
            const batteryQuality = data.hasBattery ? assessBatteryBrand(data.batteryBrand) : null;
            
            return {
                systemSize,
                totalPrice,
                fairPriceRange: `£${Math.round(fairPriceMin).toLocaleString()} - £${Math.round(fairPriceMax).toLocaleString()}`,
                priceAssessment,
                priceColor,
                panelQuality,
                batteryQuality,
                batteryCapacity,
                overpricePercentage: Math.round(((totalPrice - fairPrice) / fairPrice) * 100)
            };
        }

        function extractBatteryCapacity(batteryBrand) {
            // Comprehensive battery capacity mapping for all UK models
            const batteryCapacities = {
                // Fox ESS
                'fox-ess-ep11': 10.36,
                'fox-ess-ep5': 5.18,
                'fox-ess-eq4800': 4.66,
                'fox-ess-hv2600': 2.6,
                'fox-ess-ecs2900': 2.88,
                'fox-ess-ecs4300': 4.14,
                'fox-ess-ec4100': 4.03,
                
                // GivEnergy
                'givenergy-2.6': 2.6,
                'givenergy-5.2': 5.2,
                'givenergy-9.5': 9.5,
                'givenergy-stack3': 10.2,
                'givenergy-stack4': 13.6,
                'givenergy-stack5': 17.0,
                'givenergy-stack6': 20.4,
                'givenergy-aio-6': 13.5,
                'givenergy-aio-3.6': 13.5,
                
                // Tesla
                'tesla-powerwall-2': 13.5,
                'tesla-powerwall-3': 13.5,
                
                // SolarEdge
                'solaredge-10': 10.0,
                'solaredge-9.7': 9.7,
                'solaredge-23': 23.0,
                
                // Pylontech
                'pylontech-us3000c': 3.55,
                'pylontech-us5000': 4.8,
                'pylontech-h48074': 3.55,
                'pylontech-force-h2': 14.21,
                
                // Alpha ESS
                'alpha-ess-5.7': 5.7,
                'alpha-ess-5.04': 5.04,
                'alpha-ess-12': 12.0,
                'alpha-ess-2.9': 2.9,
                'alpha-ess-10.1': 10.1,
                
                // Sonnen
                'sonnen-10': 10.0,
                'sonnen-eco': 8.0,
                'sonnen-hybrid': 8.0,
                
                // Enphase
                'enphase-iq-5p': 5.0,
                'enphase-iq-3t': 3.36,
                'enphase-iq-10t': 10.08,
                
                // Other Brands
                'duracell-5.12': 5.12,
                'solax-5.8': 5.8
            };
            
            return batteryCapacities[batteryBrand] || 0;
        }

        function assessPanelBrand(brand) {
            const premiumBrands = ['sunpower', 'panasonic', 'lg', 'rec'];
            const tier1Brands = ['dmegc', 'perlight', 'longi', 'jinko', 'trina', 'canadian', 'ja-solar', 'risen', 'aiko', 'eurener'];
            const goodBrands = ['qcells', 'solaria', 'silfab', 'astronergy', 'seraphim'];
            
            if (premiumBrands.includes(brand)) {
                return { rating: 'Excellent', color: 'text-green-600', description: 'Premium Tier 1 brand with excellent warranty and performance' };
            } else if (tier1Brands.includes(brand)) {
                return { rating: 'Very Good', color: 'text-green-600', description: 'Reliable Tier 1 brand with good performance and warranty' };
            } else if (goodBrands.includes(brand)) {
                return { rating: 'Good', color: 'text-blue-600', description: 'Solid brand with decent performance and warranty' };
            } else {
                return { rating: 'Unknown/Budget', color: 'text-gray-600', description: 'Research this brand carefully for warranty and performance' };
            }
        }

        function assessBatteryBrand(brand) {
            // Premium brands with excellent warranty and performance
            const premiumBrands = [
                'tesla-powerwall-2', 'tesla-powerwall-3', 
                'sonnen-10', 'sonnen-eco', 'sonnen-hybrid',
                'enphase-iq-5p', 'enphase-iq-3t', 'enphase-iq-10t'
            ];
            
            // Popular UK brands with very good reliability
            const popularBrands = [
                'givenergy-2.6', 'givenergy-5.2', 'givenergy-9.5', 'givenergy-stack3', 'givenergy-stack4', 'givenergy-stack5', 'givenergy-stack6', 'givenergy-aio-6', 'givenergy-aio-3.6',
                'fox-ess-ep11', 'fox-ess-ep5', 'fox-ess-eq4800', 'fox-ess-hv2600', 'fox-ess-ecs2900', 'fox-ess-ecs4300', 'fox-ess-ec4100',
                'solaredge-10', 'solaredge-9.7', 'solaredge-23',
                'pylontech-us3000c', 'pylontech-us5000', 'pylontech-h48074', 'pylontech-force-h2',
                'alpha-ess-5.7', 'alpha-ess-5.04', 'alpha-ess-12', 'alpha-ess-2.9', 'alpha-ess-10.1',
                'duracell-5.12', 'solax-5.8'
            ];
            
            if (premiumBrands.includes(brand)) {
                return { rating: 'Excellent', color: 'text-green-600', description: 'Premium battery with excellent warranty and performance' };
            } else if (popularBrands.includes(brand)) {
                return { rating: 'Very Good', color: 'text-green-600', description: 'Popular UK brand with good reliability' };
            } else {
                return { rating: 'Good', color: 'text-blue-600', description: 'Decent battery option' };
            }
        }

        function displayQuoteAnalysis(analysis) {
            const resultsSection = document.getElementById('quote-results');
            resultsSection.innerHTML = `
                <h3 class="text-2xl section-heading font-bold mb-6 text-center">Quote Analysis Results</h3>
                <div class="grid md:grid-cols-2 mobile-grid gap-6 mb-6">
                    <div class="border rounded-lg p-6 mobile-card">
                        <h4 class="text-lg font-semibold mb-4">Price Analysis</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between"><span class="mobile-text-base">Your Quote:</span><span class="font-semibold">£${analysis.totalPrice.toLocaleString()}</span></div>
                            <div class="flex justify-between"><span class="mobile-text-base">Fair Price Range:</span><span class="font-semibold mobile-text-base">${analysis.fairPriceRange}</span></div>
                            <div class="flex justify-between"><span class="mobile-text-base">Assessment:</span><span class="font-semibold mobile-text-base ${analysis.priceColor}">${analysis.priceAssessment}</span></div>
                            ${analysis.overpricePercentage > 0 ? `<div class="flex justify-between"><span class="mobile-text-base">Overprice:</span><span class="font-semibold text-red-600">${analysis.overpricePercentage}%</span></div>` : ''}
                        </div>
                    </div>
                    <div class="border rounded-lg p-6 mobile-card">
                        <h4 class="text-lg font-semibold mb-4">System Quality</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between"><span class="mobile-text-base">Panel Quality:</span><span class="font-semibold mobile-text-base ${analysis.panelQuality.color}">${analysis.panelQuality.rating}</span></div>
                            ${analysis.batteryQuality ? `<div class="flex justify-between"><span class="mobile-text-base">Battery Quality:</span><span class="font-semibold mobile-text-base ${analysis.batteryQuality.color}">${analysis.batteryQuality.rating}</span></div>` : ''}
                            <div class="flex justify-between"><span class="mobile-text-base">System Size:</span><span class="font-semibold">${analysis.systemSize}kW</span></div>
                            ${analysis.batteryCapacity > 0 ? `<div class="flex justify-between"><span class="mobile-text-base">Battery Size:</span><span class="font-semibold">${analysis.batteryCapacity.toFixed(2)}kWh</span></div>` : ''}
                        </div>
                    </div>
                </div>
                <div class="border-l-4 border-blue-500 bg-blue-50 p-6 mb-6 mobile-card">
                    <h4 class="text-lg font-semibold mb-3">Recommendations</h4>
                    <div class="space-y-2 text-gray-700 mobile-text-base">
                        <p><strong>Panel Quality:</strong> ${analysis.panelQuality.description}</p>
                        ${analysis.batteryQuality ? `<p><strong>Battery Quality:</strong> ${analysis.batteryQuality.description}</p>` : ''}
                        ${analysis.overpricePercentage > 20 ? 
                            '<p><strong>Price Concern:</strong> This quote is significantly overpriced. Consider getting additional quotes or negotiating.</p>' :
                            analysis.overpricePercentage > 10 ?
                            '<p><strong>Price Note:</strong> This quote is slightly high. You might be able to negotiate a better price.</p>' :
                            '<p><strong>Price Assessment:</strong> This quote appears to be fairly priced for the system specified.</p>'
                        }
                    </div>
                </div>
                <div class="text-center">
                    <button onclick="getAnotherQuote()" class="bg-blue-600 text-white px-6 py-3 mobile-button rounded-lg font-semibold hover:bg-blue-700 transition mr-4">Analyze Another Quote</button>
                    <button onclick="scrollToConsultation()" class="bg-green-600 text-white px-6 py-3 mobile-button rounded-lg font-semibold hover:bg-green-700 transition">Get System Recommendation</button>
                </div>
            `;
        }

        function getAnotherQuote() {
            document.getElementById('quote-form').reset();
            document.querySelectorAll('.size-button').forEach(btn => btn.classList.remove('selected'));
            document.querySelectorAll('.custom-input').forEach(input => input.classList.remove('active'));
            selectedSystemSize = null;
            selectedPanelOutput = null;
            selectedBattery = null;
            document.getElementById('quote-results').classList.add('hidden');
            document.getElementById('analyzer').scrollIntoView({ behavior: 'smooth' });
        }

        let currentStep = 1;
        let consultationData = {};
        let selectedSystemSize = null;
        let selectedPanelOutput = null;
        let selectedBattery = null;
        let currentInflationRate = 'standard';
        const totalSteps = 14;
        const engine = new SolarRecommendationEngine();

        function toggleInflationRate() {
            const paybackElement = document.getElementById('payback-period');
            const toggleButton = document.getElementById('inflation-toggle-btn');
            const explanationElement = document.getElementById('inflation-explanation');
            if (!window.solarRecommendation) return;
            const financials = window.solarRecommendation.financials;
            if (currentInflationRate === 'standard') {
                paybackElement.textContent = financials.paybackYears7Percent + ' years';
                toggleButton.textContent = 'Show 3.5% inflation';
                explanationElement.textContent = 'Based on 7% annual energy price increases (current UK inflation)';
                currentInflationRate = 'current';
            } else {
                paybackElement.textContent = financials.paybackYears + ' years';
                toggleButton.textContent = 'Show 7% inflation';
                explanationElement.textContent = 'Based on 3.5% annual energy price increases (standard UK assumption)';
                currentInflationRate = 'standard';
            }
        }

        function updateProgress() {
            const progressPercent = (currentStep / totalSteps) * 100;
            document.getElementById('progress-bar').style.width = progressPercent + '%';
            document.getElementById('progress-text').textContent = `Question ${currentStep} of ${totalSteps}`;
        }

        function selectOption(element, value, questionKey) {
            const siblings = element.parentElement.children;
            for (let sibling of siblings) {
                sibling.classList.remove('selected');
            }
            element.classList.add('selected');
            consultationData[questionKey] = value;
            
            // Handle heat pump logic
            if (questionKey === 'heatingSystem') {
                handleHeatPumpLogic(value);
            }
            
            const nextBtn = document.getElementById('next-btn');
            nextBtn.disabled = false;
            nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
        }

        function handleHeatPumpLogic(heatingSystemValue) {
            const heatPumpTitle = document.getElementById('heat-pump-question-title');
            const heatPumpOptions = document.getElementById('heat-pump-options');
            const heatPumpExisting = document.getElementById('heat-pump-existing');
            
            if (heatingSystemValue === 'heat-pump') {
                // User already has a heat pump
                heatPumpTitle.textContent = 'Heat Pump System Detected';
                heatPumpOptions.classList.add('hidden');
                heatPumpExisting.classList.remove('hidden');
                // Auto-set the value to indicate they already have one
                consultationData['heatPumpPlans'] = 'already-have';
                
                // Enable the Next button since we've automatically handled this question
                const nextBtn = document.getElementById('next-btn');
                nextBtn.disabled = false;
                nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                // User doesn't have a heat pump, show normal question
                heatPumpTitle.textContent = 'Are you considering installing a heat pump?';
                heatPumpOptions.classList.remove('hidden');
                heatPumpExisting.classList.add('hidden');
                // Clear any previous heat pump plans data
                if (consultationData['heatPumpPlans'] === 'already-have') {
                    delete consultationData['heatPumpPlans'];
                }
                
                // Disable the Next button until user makes a selection
                const nextBtn = document.getElementById('next-btn');
                nextBtn.disabled = true;
                nextBtn.classList.add('opacity-50', 'cursor-not-allowed');
            }
        }

        function nextQuestion() {
            if (currentStep < totalSteps) {
                document.querySelector(`[data-step="${currentStep}"]`).classList.remove('active');
                currentStep++;
                document.querySelector(`[data-step="${currentStep}"]`).classList.add('active');
                updateProgress();
                document.getElementById('prev-btn').classList.remove('hidden');
                const nextBtn = document.getElementById('next-btn');
                if (currentStep === totalSteps) {
                    nextBtn.textContent = 'Get My Recommendation';
                    nextBtn.onclick = showResults;
                } else {
                    // Check if this is the heat pump question and user already has one
                    if (currentStep === 10 && consultationData['heatingSystem'] === 'heat-pump') {
                        // Keep button enabled for heat pump detection case
                        nextBtn.disabled = false;
                        nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                    } else {
                        // Normal behavior - disable until user makes selection
                        nextBtn.disabled = true;
                        nextBtn.classList.add('opacity-50', 'cursor-not-allowed');
                    }
                }
            }
        }

        function previousQuestion() {
            if (currentStep > 1) {
                document.querySelector(`[data-step="${currentStep}"]`).classList.remove('active');
                currentStep--;
                document.querySelector(`[data-step="${currentStep}"]`).classList.add('active');
                updateProgress();
                if (currentStep === 1) {
                    document.getElementById('prev-btn').classList.add('hidden');
                }
                const nextBtn = document.getElementById('next-btn');
                nextBtn.textContent = 'Next Question';
                nextBtn.onclick = nextQuestion;
                nextBtn.disabled = false;
                nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        function showResults() {
            document.getElementById('consultation-container').style.display = 'none';
            document.querySelector('.flex.justify-between.mt-8').style.display = 'none';
            const recommendation = engine.calculateSolarRecommendation(consultationData);
            displayRecommendation(recommendation);
            document.getElementById('consultation-results').classList.remove('hidden');
        }

        function displayRecommendation(recommendation) {
            const { system, financials, insights, confidence } = recommendation;
            document.getElementById('system-size').textContent = system.systemSize + 'kW';
            document.getElementById('battery-size').textContent = system.batterySize + 'kWh';
            document.getElementById('confidence-score').textContent = confidence + '% Confidence';
            document.getElementById('total-cost').textContent = '£' + financials.systemCost.toLocaleString();
            document.getElementById('annual-savings').textContent = '£' + financials.annualSavings.toLocaleString();
            document.getElementById('payback-period').textContent = financials.paybackYears + ' years';
            document.getElementById('roi').textContent = financials.roi + '%';
            document.getElementById('lifestyle-insight').textContent = insights.lifestyleMatch;
            document.getElementById('battery-insight').textContent = insights.batteryRecommendation;
            const tipsList = document.getElementById('optimization-tips');
            tipsList.innerHTML = '';
            insights.optimizationTips.forEach(tip => {
                const li = document.createElement('li');
                li.textContent = '• ' + tip;
                tipsList.appendChild(li);
            });
            const stepsList = document.getElementById('next-steps');
            stepsList.innerHTML = '';
            insights.nextSteps.forEach((step, index) => {
                const li = document.createElement('li');
                li.textContent = `${index + 1}. ${step}`;
                stepsList.appendChild(li);
            });
            window.solarRecommendation = recommendation;
            currentInflationRate = 'standard';
            if (system.systemSize) {
                setTimeout(() => {
                    const sizeButtons = document.querySelectorAll('[data-size]');
                    sizeButtons.forEach(btn => {
                        if (btn.dataset.size == system.systemSize) {
                            selectSystemSize(btn, system.systemSize);
                        }
                    });
                }, 100);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.consultation-option').forEach(option => {
                option.addEventListener('click', function() {
                    const step = this.closest('.consultation-step').dataset.step;
                    const value = this.dataset.value;
                    const questionKeys = {
                        '1': 'propertyType', '2': 'bedrooms', '3': 'occupation',
                        '4': 'workSchedule', '5': 'homeDuringDay', '6': 'household',
                        '7': 'monthlyBill', '8': 'evPlans', '9': 'heatingSystem',
                        '10': 'heatPumpPlans', '11': 'primaryGoal', '12': 'batteryInterest',
                        '13': 'roofOrientation', '14': 'timeline'
                    };
                    selectOption(this, value, questionKeys[step]);
                });
            });

            document.querySelectorAll('[data-size]').forEach(button => {
                button.addEventListener('click', function() { selectSystemSize(this, this.dataset.size); });
            });
            
            document.querySelectorAll('[data-output]').forEach(button => {
                button.addEventListener('click', function() { selectPanelOutput(this, this.dataset.output); });
            });
            
            document.querySelectorAll('[data-battery]').forEach(button => {
                button.addEventListener('click', function() { selectBattery(this, this.dataset.battery); });
            });

            document.getElementById('battery-brand-select').addEventListener('change', function() {
                const customInput = document.getElementById('custom-battery-input');
                if (this.value === 'other-battery') {
                    customInput.classList.add('active');
                } else {
                    customInput.classList.remove('active');
                }
            });
        });

        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active'));
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }

        function selectSystemSize(button, size) {
            document.querySelectorAll('[data-size]').forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            selectedSystemSize = size;
            const customInput = document.getElementById('custom-size-input');
            if (size === 'custom') {
                customInput.classList.add('active');
            } else {
                customInput.classList.remove('active');
            }
        }

        function selectPanelOutput(button, output) {
            document.querySelectorAll('[data-output]').forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            selectedPanelOutput = output;
            const customInput = document.getElementById('custom-output-input');
            if (output === 'custom-output') {
                customInput.classList.add('active');
            } else {
                customInput.classList.remove('active');
            }
        }

        function selectBattery(button, battery) {
            document.querySelectorAll('[data-battery]').forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            selectedBattery = battery;
            const batteryDetails = document.getElementById('battery-details');
            if (battery === 'yes') {
                batteryDetails.classList.add('active');
            } else {
                batteryDetails.classList.remove('active');
            }
        }

        function scrollToConsultation() {
            document.getElementById('consultation').scrollIntoView({ behavior: 'smooth' });
        }

        function scrollToAnalyzer() {
            document.getElementById('analyzer').scrollIntoView({ behavior: 'smooth' });
        }

        // Restart Consultation Function
        function restartConsultation() {
            // Reset all consultation data
            currentStep = 1;
            consultationData = {};
            currentInflationRate = 'standard';
            
            // Clear all selected options
            document.querySelectorAll('.consultation-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Reset progress bar
            updateProgress();
            
            // Hide results and show consultation
            document.getElementById('consultation-results').classList.add('hidden');
            document.getElementById('consultation-container').style.display = 'block';
            document.querySelector('.flex.justify-between.mt-8').style.display = 'flex';
            
            // Reset all consultation steps
            document.querySelectorAll('.consultation-step').forEach(step => {
                step.classList.remove('active');
            });
            document.querySelector('[data-step="1"]').classList.add('active');
            
            // Reset navigation buttons
            document.getElementById('prev-btn').classList.add('hidden');
            const nextBtn = document.getElementById('next-btn');
            nextBtn.textContent = 'Next Question';
            nextBtn.onclick = nextQuestion;
            nextBtn.disabled = true;
            nextBtn.classList.add('opacity-50', 'cursor-not-allowed');
            
            // Clear window recommendation
            window.solarRecommendation = null;
            
            // Scroll to consultation section
            document.getElementById('consultation').scrollIntoView({ behavior: 'smooth' });
        }

        // Installer Type Selection Handler
        function selectInstallerType(type) {
            // Update radio button selection
            document.querySelectorAll('input[name="installer-type"]').forEach(radio => {
                radio.checked = radio.value === type;
            });
            
            // Update visual styling
            const volumeOption = document.getElementById('volume-option');
            const traditionalOption = document.getElementById('traditional-option');
            
            if (type === 'volume') {
                // Style volume as selected
                volumeOption.className = "p-4 border-2 border-blue-300 rounded-lg bg-blue-100 transition hover:bg-blue-200";
                volumeOption.querySelector('.font-semibold').className = "font-semibold text-blue-800";
                volumeOption.querySelector('.text-sm').className = "text-sm text-blue-600 mt-1";
                
                // Style traditional as unselected
                traditionalOption.className = "p-4 border-2 border-gray-300 rounded-lg bg-gray-50 transition hover:bg-gray-100";
                traditionalOption.querySelector('.font-semibold').className = "font-semibold text-gray-700";
                traditionalOption.querySelector('.text-sm').className = "text-sm text-gray-600 mt-1";
            } else {
                // Style traditional as selected
                traditionalOption.className = "p-4 border-2 border-blue-300 rounded-lg bg-blue-100 transition hover:bg-blue-200";
                traditionalOption.querySelector('.font-semibold').className = "font-semibold text-blue-800";
                traditionalOption.querySelector('.text-sm').className = "text-sm text-blue-600 mt-1";
                
                // Style volume as unselected
                volumeOption.className = "p-4 border-2 border-gray-300 rounded-lg bg-gray-50 transition hover:bg-gray-100";
                volumeOption.querySelector('.font-semibold').className = "font-semibold text-gray-700";
                volumeOption.querySelector('.text-sm').className = "text-sm text-gray-600 mt-1";
            }
        }

        // Premium access tracking
        let premiumUnlocked = false;

        // Premium Modal Functions
        function showPremiumModal(tier = 'basic') {
            document.getElementById('premium-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Update modal based on selected tier
            updateModalForTier(tier);
            
            // Personalize the modal content based on consultation answers
            personalizePremiumModal();
            
            // Update preview values with current recommendation
            if (window.solarRecommendation) {
                const currentCost = window.solarRecommendation.financials.systemCost;
                document.getElementById('preview-current-cost').textContent = '£' + currentCost.toLocaleString();
                document.getElementById('modal-current-cost').textContent = '£' + currentCost.toLocaleString();
                
                // Calculate optimized estimates (30-40% savings typical)
                const optimizedLow = Math.round(currentCost * 0.6);
                const optimizedHigh = Math.round(currentCost * 0.75);
                const savingsLow = currentCost - optimizedHigh;
                const savingsHigh = currentCost - optimizedLow;
                
                document.getElementById('preview-optimized-cost').textContent = `£${optimizedLow.toLocaleString()}-${optimizedHigh.toLocaleString()}`;
                document.getElementById('preview-savings').textContent = `£${savingsLow.toLocaleString()}-${savingsHigh.toLocaleString()}`;
                document.getElementById('modal-optimized-cost').textContent = `£${optimizedLow.toLocaleString()}-${optimizedHigh.toLocaleString()}`;
                document.getElementById('modal-savings').textContent = `£${savingsLow.toLocaleString()}-${savingsHigh.toLocaleString()}`;
            }
        }

        function updateModalForTier(tier) {
            const modalTitle = document.querySelector('#premium-modal h3');
            const modalPrice = document.querySelector('#premium-modal .text-4xl');
            
            switch(tier) {
                case 'basic':
                    modalTitle.textContent = 'Basic Analysis - £14.99';
                    modalPrice.textContent = '£14.99';
                    break;
                case 'pro':
                    modalTitle.textContent = 'Pro Analysis - £29.99';
                    modalPrice.textContent = '£29.99';
                    break;
                case 'complete':
                    modalTitle.textContent = 'Complete Package - £49.99';
                    modalPrice.textContent = '£49.99';
                    break;
            }
            
            // Store selected tier for payment processing
            window.selectedTier = tier;
        }

        function personalizePremiumModal() {
            // Get customer profile from consultation data
            const profile = getCustomerProfile();
            
            // Update modal title and description based on profile
            const modalTitle = document.querySelector('#premium-modal h3');
            const modalDescription = document.querySelector('#premium-modal .text-blue-700');
            
            modalTitle.textContent = profile.title;
            modalDescription.textContent = profile.description;
            
            // Update feature list based on customer needs
            updatePremiumFeatures(profile);
        }

        function getCustomerProfile() {
            const data = consultationData;
            
            // Retired + Low Usage Profile
            if (data.occupation === 'retired' && ['40-70', '70-100'].includes(data.monthlyBill)) {
                return {
                    title: 'Maximize Your Solar Investment',
                    description: 'As a retiree with excellent solar alignment, discover advanced strategies to maximize your system\'s value and reduce bills even further.',
                    features: [
                        { icon: '☀️', title: 'Optimal Usage Timing', desc: 'Best times to run appliances for maximum solar benefit' },
                        { icon: '💰', title: 'Export Optimization', desc: 'Strategies to maximize your solar export earnings' },
                        { icon: '🔋', title: 'Right-Sized Battery', desc: 'Avoid oversized batteries - get exactly what you need' },
                        { icon: '📊', title: 'Seasonal Planning', desc: 'How to adapt usage patterns throughout the year' }
                    ]
                };
            }
            
            // EV Owner Profile
            if (data.evPlans === 'have-one') {
                return {
                    title: 'EV + Solar Optimization Strategy',
                    description: 'Discover the optimal balance between solar sizing and EV tariffs to minimize your total energy costs.',
                    features: [
                        { icon: '⚡', title: 'EV Charging Strategy', desc: 'Octopus Go vs solar charging cost analysis' },
                        { icon: '🔋', title: 'Smart Charging Schedule', desc: 'When to charge from solar vs grid tariffs' },
                        { icon: '💡', title: 'Right System Size', desc: 'Avoid oversizing - smaller solar + tariffs often better' },
                        { icon: '📈', title: 'Total Cost Analysis', desc: 'EV + home energy optimized together' }
                    ]
                };
            }
            
            // Heat Pump Owner Profile
            if (data.heatingSystem === 'heat-pump' || data.heatPumpPlans === 'already-have') {
                return {
                    title: 'Heat Pump + Solar Optimization',
                    description: 'Optimize your heat pump and solar system together for maximum efficiency and minimum cost.',
                    features: [
                        { icon: '🌡️', title: 'Heat Pump Scheduling', desc: 'Best times to run heat pump with solar' },
                        { icon: '⚡', title: 'Tariff vs Solar Analysis', desc: 'When tariffs beat solar for heating' },
                        { icon: '🔋', title: 'Battery Sizing', desc: 'Right battery size for heat pump backup' },
                        { icon: '📊', title: 'Seasonal Strategy', desc: 'Winter vs summer optimization plans' }
                    ]
                };
            }
            
            // High Usage Profile
            if (['140-200', '200+'].includes(data.monthlyBill)) {
                return {
                    title: 'High Usage Optimization Strategy',
                    description: 'With high energy usage, discover advanced strategies to maximize your solar investment and minimize bills.',
                    features: [
                        { icon: '📊', title: 'Usage Pattern Analysis', desc: 'Identify your biggest savings opportunities' },
                        { icon: '🔋', title: 'Battery Strategy', desc: 'Optimal battery size for high usage homes' },
                        { icon: '⚡', title: 'Load Shifting', desc: 'Move usage to solar hours for maximum benefit' },
                        { icon: '💰', title: 'Tariff Optimization', desc: 'Best tariffs for high usage + solar' }
                    ]
                };
            }
            
            // Shift Worker Profile
            if (data.occupation === 'healthcare' || data.occupation === 'shift') {
                return {
                    title: 'Shift Worker Solar Strategy',
                    description: 'Your irregular schedule requires a specialized approach to maximize solar benefits despite unpredictable usage patterns.',
                    features: [
                        { icon: '🔋', title: 'Enhanced Battery Strategy', desc: 'Larger battery for schedule flexibility' },
                        { icon: '⏰', title: 'Flexible Usage Plans', desc: 'Strategies for rotating shift patterns' },
                        { icon: '💡', title: 'Smart Home Integration', desc: 'Automate usage when you\'re not home' },
                        { icon: '📈', title: 'ROI Optimization', desc: 'Maximize returns despite irregular patterns' }
                    ]
                };
            }
            
            // Default Profile
            return {
                title: 'Advanced Solar Optimization',
                description: 'Unlock personalized strategies to maximize your solar investment and minimize your energy costs.',
                features: [
                    { icon: '📊', title: '3-Scenario Analysis', desc: 'Solar-only vs Tariff vs Hybrid strategies' },
                    { icon: '💰', title: 'Cost Optimization', desc: 'Find the most cost-effective approach' },
                    { icon: '🔋', title: 'Battery Strategy', desc: 'Right-sized storage for your needs' },
                    { icon: '⚡', title: 'Usage Optimization', desc: 'Maximize your solar generation benefit' }
                ]
            };
        }

        function updatePremiumFeatures(profile) {
            const featuresContainer = document.querySelector('#premium-modal .space-y-3');
            featuresContainer.innerHTML = '';
            
            profile.features.forEach(feature => {
                const featureDiv = document.createElement('div');
                featureDiv.className = 'flex items-start';
                featureDiv.innerHTML = `
                    <div class="text-green-500 mr-3 mt-1">✓</div>
                    <div>
                        <div class="font-semibold">${feature.icon} ${feature.title}</div>
                        <div class="text-sm mobile-text-sm text-gray-600">${feature.desc}</div>
                    </div>
                `;
                featuresContainer.appendChild(featureDiv);
            });
        }

        function closePremiumModal() {
            document.getElementById('premium-modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function proceedToPayment() {
            // In a real implementation, this would integrate with Stripe, PayPal, etc.
            alert('Payment integration would be implemented here. For demo purposes, this would redirect to a secure payment processor.');
            
            // Demo: Simulate successful payment and unlock premium
            setTimeout(() => {
                premiumUnlocked = true;
                closePremiumModal();
                showPremiumContent();
            }, 1000);
        }

        function showPremiumContent() {
            // Only show if premium is unlocked
            if (!premiumUnlocked) {
                showPremiumModal();
                return;
            }
            
            // Hide the teaser and show premium analysis
            document.querySelector('.premium-teaser').style.display = 'none';
            
            // Get personalized content based on customer profile
            const profile = getCustomerProfile();
            
            // Create and show premium content
            const premiumContent = document.createElement('div');
            premiumContent.className = 'premium-content bg-gradient-to-br from-green-50 to-emerald-100 border-2 border-green-200 rounded-lg p-6 mb-8';
            premiumContent.innerHTML = `
                <div class="text-center mb-6">
                    <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full mb-4">
                        <span class="text-2xl">✅</span>
                    </div>
                    <h4 class="text-2xl font-bold text-green-900 mb-2">${profile.title} - Unlocked!</h4>
                    <p class="text-green-700 mobile-text-base">${profile.description}</p>
                </div>
                
                <div class="bg-white rounded-lg p-6 mb-6">
                    <h5 class="text-xl font-bold text-gray-800 mb-4">🎯 Personalized Strategy for You</h5>
                    <div class="space-y-4">
                        <div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                            <h6 class="font-semibold text-blue-800 mb-2">${getPersonalizedRecommendation()}</h6>
                            <ul class="text-sm mobile-text-sm text-blue-700 space-y-1">
                                ${getPersonalizedBulletPoints().map(point => `<li>• ${point}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <div class="grid md:grid-cols-3 mobile-grid gap-4">
                            <div class="text-center p-3 bg-gray-50 rounded-lg">
                                <div class="text-lg font-bold text-gray-800">£${getOptimizedCost()}</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Optimized Investment</div>
                            </div>
                            <div class="text-center p-3 bg-green-50 rounded-lg">
                                <div class="text-lg font-bold text-green-600">${getOptimizedPayback()} years</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Payback Period</div>
                            </div>
                            <div class="text-center p-3 bg-blue-50 rounded-lg">
                                <div class="text-lg font-bold text-blue-600">£${getAdditionalSavings()}</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Additional Savings</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center">
                    <button onclick="downloadPremiumReport()" class="bg-green-600 text-white px-6 py-3 mobile-button rounded-lg font-semibold hover:bg-green-700 transition mr-4">
                        📄 Download Full Report
                    </button>
                    <button onclick="bookConsultation()" class="bg-blue-600 text-white px-6 py-3 mobile-button rounded-lg font-semibold hover:bg-blue-700 transition">
                        📞 Book Expert Consultation
                    </button>
                </div>
            `;
            
            document.querySelector('.recommendation-card.steps-card').parentNode.insertBefore(premiumContent, document.querySelector('.recommendation-card.steps-card').nextSibling);
        }

        function getPersonalizedRecommendation() {
            const data = consultationData;
            
            if (data.occupation === 'retired' && ['40-70', '70-100'].includes(data.monthlyBill)) {
                return 'Recommended: Export-Optimized Strategy';
            } else if (data.evPlans === 'have-one') {
                return 'Recommended: EV Tariff + Right-Sized Solar';
            } else if (data.heatingSystem === 'heat-pump' || data.heatPumpPlans === 'already-have') {
                return 'Recommended: Heat Pump Tariff Optimization';
            } else if (['140-200', '200+'].includes(data.monthlyBill)) {
                return 'Recommended: High Usage Load Shifting Strategy';
            } else if (data.occupation === 'healthcare' || data.occupation === 'shift') {
                return 'Recommended: Flexible Battery Strategy';
            }
            return 'Recommended: Hybrid Optimization Strategy';
        }

        function getPersonalizedBulletPoints() {
            const data = consultationData;
            
            if (data.occupation === 'retired' && ['40-70', '70-100'].includes(data.monthlyBill)) {
                return [
                    `${Math.round((window.solarRecommendation?.system.systemSize || 4) * 0.8)}kW solar system (optimized for export)`,
                    `${Math.round((window.solarRecommendation?.system.batterySize || 8) * 0.6)}kWh battery (minimal storage needed)`,
                    'Run appliances 10am-3pm for maximum solar benefit',
                    'Export optimization strategy for maximum earnings'
                ];
            } else if (data.evPlans === 'have-one') {
                return [
                    `${Math.round((window.solarRecommendation?.system.systemSize || 6) * 0.75)}kW solar system (right-sized)`,
                    `${Math.round((window.solarRecommendation?.system.batterySize || 10) * 0.8)}kWh battery (home usage focus)`,
                    'Octopus Go tariff for EV charging (7p/kWh overnight)',
                    'Solar for daytime home usage, tariff for EV'
                ];
            } else if (data.heatingSystem === 'heat-pump' || data.heatPumpPlans === 'already-have') {
                return [
                    `${Math.round((window.solarRecommendation?.system.systemSize || 6) * 0.8)}kW solar system (balanced)`,
                    `${Math.round((window.solarRecommendation?.system.batterySize || 10) * 0.9)}kWh battery (heat pump backup)`,
                    'Economy 7 or Cosy tariff for heat pump operation',
                    'Solar for daytime, tariff for heating'
                ];
            }
            return [
                `${Math.round((window.solarRecommendation?.system.systemSize || 6) * 0.85)}kW solar system (optimized)`,
                `${Math.round((window.solarRecommendation?.system.batterySize || 10) * 0.85)}kWh battery (right-sized)`,
                'Time-of-use tariff optimization',
                'Load shifting for maximum benefit'
            ];
        }

        function getOptimizedCost() {
            const currentCost = window.solarRecommendation?.financials.systemCost || 15000;
            return Math.round(currentCost * 0.7).toLocaleString();
        }

        function getOptimizedPayback() {
            return (Math.round((window.solarRecommendation?.financials.paybackYears || 10) * 0.7 * 10) / 10).toFixed(1);
        }

        function getAdditionalSavings() {
            const currentCost = window.solarRecommendation?.financials.systemCost || 15000;
            return Math.round(currentCost * 0.3).toLocaleString();
        }

        // Reset premium access when consultation restarts
        function restartConsultation() {
            premiumUnlocked = false; // Reset premium access
            
            // Hide any existing premium content
            const existingPremiumContent = document.querySelector('.premium-content');
            if (existingPremiumContent) {
                existingPremiumContent.remove();
            }
            
            // Show premium teaser again
            const premiumTeaser = document.querySelector('.premium-teaser');
            if (premiumTeaser) {
                premiumTeaser.style.display = 'block';
            }
            
            // Reset consultation data and UI
            consultationData = {};
            currentStep = 1;
            
            // Hide results and show consultation
            document.getElementById('consultation-results').classList.add('hidden');
            document.getElementById('consultation-container').style.display = 'block';
            document.querySelector('.flex.justify-between.mt-8').style.display = 'flex';
            
            // Reset all questions
            document.querySelectorAll('.consultation-step').forEach((step, index) => {
                if (index === 0) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            });
            
            // Reset all selections
            document.querySelectorAll('.consultation-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Reset navigation
            updateProgress();
            document.getElementById('prev-btn').classList.add('hidden');
            const nextBtn = document.getElementById('next-btn');
            nextBtn.textContent = 'Next Question';
            nextBtn.onclick = nextQuestion;
            nextBtn.disabled = true;
            nextBtn.classList.add('opacity-50', 'cursor-not-allowed');
            
            // Scroll to consultation
            document.getElementById('consultation').scrollIntoView({ behavior: 'smooth' });
        }

        function downloadPremiumReport() {
            alert('Premium report download would be implemented here - generating personalized PDF with detailed tariff analysis.');
        }

        function bookConsultation() {
            alert('Expert consultation booking would be implemented here - calendar integration for 1-on-1 sessions.');
        }
    </script>

    <!-- Premium Modal -->
    <div id="premium-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-gray-800">Advanced Tariff Optimization</h3>
                    <button onclick="closePremiumModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                </div>
                
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 mb-4">What You'll Get:</h4>
                    <div class="space-y-3">
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">3-Scenario Comparison Analysis</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Solar-only vs Tariff optimization vs Hybrid strategy</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">EV Charging Optimization</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Octopus Go vs solar sizing cost analysis</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">Heat Pump Strategy</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Tariff vs solar heating cost comparison</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">Personalized Recommendations</div>
                                <div class="text-sm mobile-text-sm text-gray-600">Optimal system size and tariff combination for your lifestyle</div>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="text-green-500 mr-3 mt-1">✓</div>
                            <div>
                                <div class="font-semibold">Detailed Financial Projections</div>
                                <div class="text-sm mobile-text-sm text-gray-600">10-year savings breakdown with inflation adjustments</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-blue-50 rounded-lg p-4 mb-6">
                    <h5 class="font-semibold text-blue-800 mb-3">Your Potential Savings:</h5>
                    <div class="space-y-2 text-sm mobile-text-sm">
                        <div class="flex justify-between">
                            <span class="text-blue-700">Current Recommendation:</span>
                            <span class="font-semibold" id="modal-current-cost">£19,250</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-blue-700">Optimized Strategy:</span>
                            <span class="font-semibold text-green-600" id="modal-optimized-cost">£12,800-15,200</span>
                        </div>
                        <div class="flex justify-between border-t border-blue-200 pt-2">
                            <span class="text-blue-800 font-semibold">Additional Savings:</span>
                            <span class="font-bold text-green-600" id="modal-savings">£4,050-6,450</span>
                        </div>
                    </div>
                </div>
                
                <div class="text-center">
                    <div class="text-3xl font-bold text-gray-800 mb-2">£14.99</div>
                    <div class="text-gray-600 mb-6">One-time payment • Instant access • 30-day money-back guarantee</div>
                    
                    <button onclick="proceedToPayment()" class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-8 py-4 mobile-button rounded-lg font-bold text-lg hover:from-blue-700 hover:to-indigo-700 transition shadow-lg w-full mb-4">
                        Unlock Advanced Analysis Now
                    </button>
                    
                    <div class="flex items-center justify-center space-x-4 text-sm mobile-text-sm text-gray-500">
                        <span>🔒 Secure Payment</span>
                        <span>💳 All Cards Accepted</span>
                        <span>📱 Mobile Optimized</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

